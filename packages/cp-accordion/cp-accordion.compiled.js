!function(e,n){if("function"==typeof define&&define.amd)define(["../cp-accordion-heading/cp-accordion-heading.compiled.js","../cp-accordion-panel/cp-accordion-panel.compiled.js"],n);else if("undefined"!=typeof exports)n(require("../cp-accordion-heading/cp-accordion-heading.compiled.js"),require("../cp-accordion-panel/cp-accordion-panel.compiled.js"));else{n(e.cpAccordionHeadingCompiled,e.cpAccordionPanelCompiled),e.cpAccordion={exports:{}}.exports}}(this,function(){"use strict";function e(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function n(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function t(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function a(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}function i(e){return new Promise(function(n){e.addEventListener("transitionend",function t(){e.removeEventListener("transitionend",t),n()})})}function o(){return new Promise(function(e){return requestAnimationFrame(e)})}var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}();Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),t=n.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var a=arguments[1],i=0;i<t;){var o=n[i];if(e.call(a,o,i,n))return i;i++}return-1}});var c=document.createElement("template");c.innerHTML="\n  <style>:host {\n  display: block;\n  position: relative;\n  overflow: hidden;\n  margin: 0; }</style>\n  <slot></slot>\n",window.ShadyCSS&&ShadyCSS.prepareTemplate(c,"cp-accordion");var l=function(l){function s(){n(this,s);var e=t(this,(s.__proto__||Object.getPrototypeOf(s)).call(this));return e.attachShadow({mode:"open"}),e.shadowRoot.appendChild(c.content.cloneNode(!0)),e}return a(s,HTMLElement),r(s,[{key:"connectedCallback",value:function(){window.ShadyCSS&&ShadyCSS.styleElement(this),this.setAttribute("role","tablist"),this.setAttribute("defined",""),this.addEventListener("cp-accordion-change",this._changeHandler),this.addEventListener("keydown",this._keydownHandler)}},{key:"disconnectedCallback",value:function(){this.removeEventListener("cp-accordion-change",this._changeHandler),this.removeEventListener("keydown",this._keydownHandler)}},{key:"toggle",value:function(e){var n=this._allHeadings(),t=this._allPanels(),a=n[e],i=t[e];a&&i&&(a.expanded?(this._collapseHeading(a),this._collapsePanel(i)):(this._expandHeading(a),this._expandPanel(i)))}},{key:"expand",value:function(e){var n=this._allHeadings(),t=this._allPanels(),a=n[e],i=t[e];a&&i&&(this._expandHeading(a),this._expandPanel(i))}},{key:"expandAll",value:function(){var e=this,n=this._allHeadings(),t=this._allPanels();n.forEach(function(n){return e._expandHeading(n)}),t.forEach(function(n){return e._expandPanel(n)})}},{key:"collapse",value:function(e){var n=this._allHeadings(),t=this._allPanels(),a=n[e],i=t[e];a&&i&&(this._collapseHeading(a),this._collapsePanel(i))}},{key:"collapseAll",value:function(){var e=this._allHeadings(),n=this._allPanels();e.forEach(function(e){return e.expanded=!1}),n.forEach(function(e){return e.expanded=!1})}},{key:"_changeHandler",value:function(e){var n=e.target,t=e.target.nextElementSibling;e.detail.expanded?(this._expandHeading(n),this._expandPanel(t)):(this._collapseHeading(n),this._collapsePanel(t))}},{key:"_toggle",value:function(e,n){}},{key:"_expandHeading",value:function(e){e.expanded=!0}},{key:"_expandPanel",value:function(e){e.expanded=!0;var n=e.getBoundingClientRect().height;this._animate(e,-n,0)}},{key:"_collapseHeading",value:function(e){e.expanded=!1}},{key:"_collapsePanel",value:function(e){var n=e.getBoundingClientRect().height;this._animate(e,0,-n).then(function(){e.expanded=!1})}},{key:"_animate",value:function(n,t,a){var r=this,c=[].concat(e(this.children)),l=c.findIndex(function(e){return e===n}),s=c.slice(l);return this.classList.add("animating"),c.forEach(function(e){e.style.position="relative",e.style.zIndex=2}),s.forEach(function(e){e.style.position="relative",e.style.zIndex=1,e.style.transform="translateY("+t+"px)"}),o().then(function(e){return o()}).then(function(e){return s.forEach(function(e){e.style.transform="translateY("+a+"px)",e.classList.add("animating")}),i(n)}).then(function(e){s.forEach(function(e){e.style.transform="",e.classList.remove("animating")}),c.forEach(function(e){e.style.position="",e.style.zIndex=""}),r.classList.remove("animating")})}},{key:"_keydownHandler",value:function(e){var n=e.target;if(this._isHeading(n)){var t=void 0;switch(e.key){case"ArrowDown":case"Down":case"ArrowRight":case"Right":t=this._nextHeading();break;case"ArrowUp":case"Up":case"ArrowLeft":case"Left":t=this._previousHeading();break;case"Home":t=this._firstHeading();break;case"End":t=this._lastHeading();break;default:return}t.shadowRoot.querySelector("button").focus()}}},{key:"_allHeadings",value:function(){return[].concat(e(this.querySelectorAll("cp-accordion-heading")))}},{key:"_allPanels",value:function(){return[].concat(e(this.querySelectorAll("cp-accordion-panel")))}},{key:"_previousHeading",value:function(){var e=this._allHeadings();return e[(e.findIndex(function(e){return e===document.activeElement})-1+e.length)%e.length]}},{key:"_nextHeading",value:function(){var e=this._allHeadings();return e[(e.findIndex(function(e){return e===document.activeElement})+1)%e.length]}},{key:"_firstHeading",value:function(){return this._allHeadings()[0]}},{key:"_lastHeading",value:function(){var e=this._allHeadings();return e[e.length-1]}},{key:"_isHeading",value:function(e){return"cp-accordion-heading"===e.tagName.toLowerCase()}}]),s}();window.customElements.define("cp-accordion",l)});