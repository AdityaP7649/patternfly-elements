{"version":3,"file":"pfe-jump-links.umd.js","sources":["../_temp/pfe-jump-links-panel.js","../_temp/pfe-jump-links-nav.js","../_temp/pfe-jump-links.umd.js"],"sourcesContent":["/*!\n * PatternFly Elements: PfeJumpLinks 1.0.0\n * @license\n * Copyright 2020 Red Hat, Inc.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * \n*/\n\nimport PFElement from \"../../pfelement/dist/pfelement.js\";\n\nclass PfeJumpLinksPanel extends PFElement {\n\n  // Injected at build-time\n  static get version() {\n    return \"1.0.0\";\n  }\n\n  // Injected at build-time\n  get html() {\n    return `\n<style>::slotted(.pfe-jump-links__section--spacer){--pfe-jump-links-panel__section--spacer:calc(  var(--pfe-navigation--Height--actual) + var(--pfe-jump-links--nav-height) );height:100px;margin-top:-100px;display:block;position:relative;width:0;margin-top:calc(-1 * var(--pfe-jump-links-panel__section--spacer));height:var(--pfe-jump-links-panel__section--spacer)} /*# sourceMappingURL=pfe-jump-links-panel.min.css.map */</style>\n<slot></slot>`;\n  }\n\n  static get tag() {\n    return \"pfe-jump-links-panel\";\n  }\n\n  get templateUrl() {\n    return \"pfe-jump-links-panel.html\";\n  }\n\n  get styleUrl() {\n    return \"pfe-jump-links-panel.scss\";\n  }\n\n  static get events() {\n    return {\n      change: `${this.tag}:change`,\n      activeNavItem: `${this.tag}:active-navItem`\n    };\n  }\n\n  get offsetValue() {\n    return this.sectionMargin || parseInt(this.customVar, 10);\n  }\n\n  static get PfeType() {\n    return PFElement.PfeTypes.Content;\n  }\n\n  static get properties() {\n    return {\n      offset: {\n        title: \"Offset\",\n        type: Number,\n        observer: \"_offsetChanged\"\n      },\n      scrolltarget: {\n        title: \"Scroll target\",\n        type: String\n      }\n    };\n  }\n\n  get nav() {\n    // Use the ID from the navigation to target the panel elements\n    // Automatically if there's only one set of tags on the page\n    if (this.scrolltarget) {\n      return document.querySelector(`pfe-jump-links-nav#${this.scrolltarget}`);\n    } else {\n      const navs = document.querySelectorAll(\"pfe-jump-links-nav\");\n      if (navs.length === 1) {\n        return navs.item(0);\n      } else if (navs.length > 1) {\n        this.warn(\n          `Cannot locate a navigation element that is connected to this panel.${\n            this.id ? ` Please add id=\"${this.scrolltarget}\" to the appropriate navigation.` : \"\"\n          }`\n        );\n      } else {\n        this.warn(`Cannot locate any navigation elements on this page. Please add a \"pfe-jump-links-nav\" element.`);\n      }\n    }\n\n    return;\n  }\n\n  get sections() {\n    return this.querySelectorAll(\".pfe-jump-links-panel__section\");\n  }\n\n  constructor() {\n    super(PfeJumpLinksPanel, { type: PfeJumpLinksPanel.PfeType });\n\n    this.currentActive = null;\n    this._slot = this.shadowRoot.querySelector(\"slot\");\n\n    this._init = this._init.bind(this);\n    this._makeSpacers = this._makeSpacers.bind(this);\n    this._isValidMarkup = this._isValidMarkup.bind(this);\n\n    this._handleResize = this._handleResize.bind(this);\n    this._scrollCallback = this._scrollCallback.bind(this);\n    this._mutationCallback = this._mutationCallback.bind(this);\n\n    this._observer = new MutationObserver(this._mutationCallback);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this._makeSpacers();\n    this._isValidMarkup();\n\n    this._init();\n\n    this.sectionMargin = this.offset;\n    this.customVar = this.cssVariable(\"--pfe-jump-links-panel--offset\") || 200;\n\n    // Fire a rebuild if necessary\n    if (this.nav && this.nav.autobuild) this.nav.rebuild();\n\n    // Set up the mutation observer\n    this._observer.observe(this, {\n      childList: true,\n      subtree: true,\n      characterData: true,\n      attributes: true\n    });\n\n    // Attach the event listener for resize\n    window.addEventListener(\"resize\", this._handleResize);\n\n    // Initialize if changes are made to slotted elements\n    this._slot.addEventListener(\"slotchange\", this._init);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    this._observer.disconnect();\n    this._slot.removeEventListener(\"slotchange\", this._init);\n\n    window.removeEventListener(\"scroll\", this._scrollCallback);\n    window.removeEventListener(\"resize\", this._handleResize);\n  }\n\n  _offsetChanged(oldVal, newVal) {\n    this.sectionMargin = newVal;\n  }\n\n  _isValidMarkup() {\n    if (this.childElementCount === 1) {\n      this.warn(\n        \"pfe-jump-links-panel must contain more than one child element. Having a top-level 'wrapper' will prevent appropriate styles from being applied.\"\n      );\n    }\n  }\n\n  _makeSpacers() {\n    if (!this.sections) {\n      return;\n    }\n    this.sections.forEach(section => {\n      let parentDiv = section.parentNode;\n      let html = document.createElement(\"div\");\n      parentDiv.insertBefore(html, section);\n      let spacer = section.previousElementSibling;\n      spacer.classList.add(\"pfe-jump-links__section--spacer\");\n      spacer.id = section.id;\n      section.removeAttribute(\"id\");\n    });\n  }\n\n  _init() {\n    window.addEventListener(\"scroll\", this._scrollCallback);\n\n    Promise.all([customElements.whenDefined(\"pfe-jump-links-nav\")]).then(() => {\n      this.menu_links = this.nav.links;\n    });\n  }\n\n  _handleResize() {\n    if (this.nav) this.nav._reportHeight();\n    this.sectionMargin = this.offset;\n    this.customVar = this.cssVariable(`${this.tag}--offset`) || 200;\n  }\n\n  _makeActive(link) {\n    if (!(link > this.menu_links.length)) {\n      let activeLink = this.menu_links.item(link);\n      if (activeLink) {\n        // Check if this is a subnav or has subsections\n        if (activeLink.classList.contains(\"sub-section\")) {\n          activeLink.setAttribute(\"active\", \"\");\n          activeLink.parentNode.parentNode.parentNode.setAttribute(\"active\", \"\");\n          activeLink.parentNode.parentNode.parentNode.classList.add(\"expand\");\n        } else if (activeLink.classList.contains(\"has-sub-section\")) {\n          activeLink.setAttribute(\"active\", \"\");\n          activeLink.parentNode.setAttribute(\"active\", \"\");\n          activeLink.parentNode.classList.add(\"expand\");\n        } else {\n          activeLink.setAttribute(\"active\", \"\");\n          activeLink.parentNode.setAttribute(\"active\", \"\");\n        }\n\n        // let activeLink2 = this.menu_links.querySelector(\"[active]\");\n        this.emitEvent(PfeJumpLinksPanel.events.activeNavItem, {\n          detail: {\n            activeNavItem: activeLink\n          }\n        });\n      }\n    }\n  }\n\n  _removeActive(link) {\n    let oldLink = this.menu_links[link];\n    if (oldLink) {\n      if (oldLink.classList.contains(\"sub-section\")) {\n        oldLink.parentNode.parentNode.parentNode.classList.remove(\"expand\");\n      }\n      oldLink.removeAttribute(\"active\");\n      oldLink.parentNode.removeAttribute(\"active\");\n    }\n  }\n\n  _removeAllActive() {\n    if (!Object.keys) {\n      Object.keys = function(obj) {\n        if (obj !== Object(obj)) throw new TypeError(\"Object.keys called on a non-object\");\n        var k = [],\n          p;\n        for (p in obj) if (Object.prototype.hasOwnProperty.call(obj, p)) k.push(p);\n        return k;\n      };\n      Object.keys.forEach = Array.forEach;\n    }\n    [...Array(this.sections.length).keys()].forEach(link => {\n      this._removeActive(link);\n    });\n  }\n\n  _mutationCallback() {\n    if (window.ShadyCSS) {\n      this._observer.disconnect();\n    }\n\n    //If we want the nav to be built automatically, re-init panel and rebuild nav\n    if (this.nav && this.nav.autobuild) {\n      this._init();\n      this.emitEvent(PfeJumpLinksPanel.events.change);\n      this.nav.rebuild();\n    }\n\n    if (window.ShadyCSS) {\n      this._observer.observe(this, {\n        childList: true,\n        subtree: true,\n        characterData: true,\n        attributes: true\n      });\n    }\n  }\n\n  _scrollCallback() {\n    // Check list of links to make sure we have them (if not, get them)\n    if (this.menu_links.length <= 0) {\n      this.menu_links = [...this.nav.links];\n    }\n\n    // Make an array from the node list\n    const sectionArr = [...this.sections];\n    // Get all the sections that match this point in the scroll\n    const matches = sectionArr.filter(section => window.scrollY >= section.offsetTop - this.offsetValue).reverse();\n\n    // Identify the last one queried as the current section\n    const current = sectionArr.indexOf(matches[0]);\n\n    // If that section isn't already active,\n    // remove active from the other links and make it active\n    if (current !== this.currentActive) {\n      this._observer.disconnect();\n\n      this._removeAllActive();\n      this.currentActive = current;\n      this._makeActive(current);\n\n      this._observer.observe(this, {\n        childList: true,\n        subtree: true,\n        characterData: true,\n        attributes: true\n      });\n    }\n  }\n}\n\nexport default PfeJumpLinksPanel;\n","/*!\n * PatternFly Elements: PfeJumpLinks 1.0.0\n * @license\n * Copyright 2020 Red Hat, Inc.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * \n*/\n\nimport PFElement from \"../../pfelement/dist/pfelement.js\";\nimport PfeJumpLinksPanel from \"./pfe-jump-links-panel.js\";\n\nclass PfeJumpLinksNav extends PFElement {\n\n  // Injected at build-time\n  static get version() {\n    return \"1.0.0\";\n  }\n\n  // Injected at build-time\n  get html() {\n    return `\n<style>:host{--pfe-jump-links-panel__section--spacer:calc(var(--pfe-jump-links-nav--Height--actual) + var(--pfe-navigation--Height--actual) + var(--jump-links-nav--nudge));-webkit-box-sizing:border-box;box-sizing:border-box;font-family:Overpass,Overpass,Helvetica,helvetica,arial,sans-serif;font-family:var(--pfe-theme--font-family, \"Overpass\", Overpass, Helvetica, helvetica, arial, sans-serif);font-weight:500;font-weight:var(--pfe-theme--font-weight--normal,500);font-weight:400;display:block;position:-webkit-sticky;position:sticky;top:calc(16px * 4);top:var(--pfe-jump-links__nav--offset,calc(var(--pfe-theme--container-spacer,16px) * 4));padding-left:0;background-color:#fff;background-color:var(--pfe-jump-links--BackgroundColor,var(--pfe-theme--color--surface--lightest,#fff))}@media (min-width:992px){:host{border:1px solid transparent;border:var(--pfe-theme--surface--border-width,1px) var(--pfe-theme--surface--border-style,solid) transparent;padding:calc(16px * 2) calc(16px * 2);padding:var(--pfe-jump-links--vertical-spacer,calc(var(--pfe-theme--container-padding,16px) * 2)) var(--pfe-jump-links--horizontal-spacer,calc(var(--pfe-theme--container-padding,16px) * 2))}}:host ::slotted([slot=pfe-jump-links-nav--heading]){color:#3c3f42;color:var(--pfe-broadcasted--text,#3c3f42);margin:0 0 16px;margin:0 0 var(--pfe-theme--container-spacer,16px);font-size:14px;font-size:var(--pfe-jump-links__heading--FontSize,var(--pfe-theme--font-size--heading--zeta,14px));font-weight:400;text-transform:uppercase}@media (max-width:991px){:host ::slotted([slot=pfe-jump-links-nav--heading]){display:none}}:host([sticky=false]){position:relative}nav{visibility:visible;margin:0;list-style:none;padding:0}nav ul{padding:0;border-left:1px solid #d2d2d2;border-left:var(--pfe-theme--surface--border-width,1px) var(--pfe-theme--surface--border-style,solid) var(--pfe-theme--color--ui-disabled,#d2d2d2)}nav li{border-left:4px solid transparent;border-left:var(--pfe-theme--surface--border-width--heavy,4px) var(--pfe-theme--surface--border-style,solid) transparent;display:block;text-decoration:none;margin-left:calc(1px * -1);margin-left:calc(var(--pfe-theme--surface--border-width,1px) * -1)}nav li.expand ul{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}nav li.expand .sub-section{display:table;height:auto}nav li[active]{border-left-color:#06c;border-left-color:var(--pfe-jump-links--BorderColor,var(--pfe-theme--color--ui-accent,#06c))}nav a{position:relative;display:table;color:#6a6e73;color:var(--pfe-theme--color--ui-disabled--text,#6a6e73);font-size:16px;font-size:var(--pfe-jump-links--FontSize,var(--pfe-theme--font-size--heading--epsilon,16px));text-decoration:none;line-height:1.5;line-height:var(--pfe-theme--line-height,1.5);padding:calc(calc(24px / 6) * 2) calc(calc(24px / 3) * 2);padding:calc(var(--pfe-jump-links__link--vertical-spacer,calc(var(--pfe-theme--content-spacer,24px)/ 6)) * 2) calc(var(--pfe-jump-links__link--horizontal-spacer,calc(var(--pfe-theme--content-spacer,24px)/ 3)) * 2)}nav a.has-sub-section{padding-bottom:calc(24px / 6);padding-bottom:var(--pfe-jump-links__link--vertical-spacer,calc(var(--pfe-theme--content-spacer,24px)/ 6))}nav a.sub-section{margin-left:calc(16px * .75);margin-left:calc(var(--pfe-theme--container-spacer,16px) * .75);font-size:calc(16px * .85);font-size:calc(var(--pfe-jump-links--FontSize,var(--pfe-theme--font-size--heading--epsilon,16px)) * .85);padding:calc(24px / 6) calc(calc(24px / 3) * 2);padding:var(--pfe-jump-links__link--vertical-spacer,calc(var(--pfe-theme--content-spacer,24px)/ 6)) calc(var(--pfe-jump-links__link--horizontal-spacer,calc(var(--pfe-theme--content-spacer,24px)/ 3)) * 2)}@media (min-width:992px){nav a.sub-section{display:none}}nav a.sub-section:last-child{padding-bottom:calc(24px / 3);padding-bottom:var(--pfe-jump-links__link--horizontal-spacer,calc(var(--pfe-theme--content-spacer,24px)/ 3))}nav a::after{content:\"\";position:absolute;width:calc(100% - 4px);width:calc(100% - var(--pfe-theme--surface--border-width--heavy,4px));height:calc(100% - 4px);height:calc(100% - var(--pfe-theme--surface--border-width--heavy,4px));top:0;left:0}nav a:focus{outline:0}nav a:focus::after{border-radius:3px;border-radius:var(--pfe-theme--surface--border-radius,3px);border:2px solid #06c;border:2px var(--pfe-theme--surface--border-style,solid) var(--pfe-theme--color--link,#06c)}nav a:hover{color:#151515;color:var(--pfe-theme--color--surface--darkest,#151515)}nav a[active]{color:#151515;color:var(--pfe-theme--color--surface--darkest,#151515)}nav ul ul{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:0;-webkit-flex:0;-ms-flex:0;flex:0;margin:0;padding:0;border-left:none!important;overflow-y:hidden;-webkit-transition:-webkit-box-flex 1s linear,-webkit-flex 1s linear;transition:-webkit-box-flex 1s linear,-webkit-flex 1s linear;transition:flex 1s linear;transition:flex 1s linear,-webkit-box-flex 1s linear,-webkit-flex 1s linear,-ms-flex 1s linear}nav ul ul li{border-left:none!important}pfe-accordion pfe-accordion-header{--pfe-theme--color--surface--border:transparent;--pfe-theme--color--ui-base--on-dark:transparent;--pfe-theme--color--ui-base:transparent;position:-webkit-sticky;position:sticky;top:0}pfe-accordion pfe-accordion-panel{border-left-color:transparent}@media (max-width:991px){pfe-accordion{border:1px solid #d2d2d2;border:var(--pfe-theme--surface--border-width,1px) var(--pfe-theme--surface--border-style,solid) var(--pfe-theme--color--ui-disabled,#d2d2d2)}pfe-accordion pfe-accordion-header{background-color:#fff;background-color:var(--pfe-theme--color--surface--lightest,#fff);--context:var(--pfe-theme--color--surface--lightest--context, light)}}@media (min-width:992px){pfe-accordion pfe-accordion-header{visibility:collapse!important;display:none}pfe-accordion pfe-accordion-panel{visibility:collapse;display:none;opacity:1;display:block}pfe-accordion pfe-accordion-panel>pfe-jump-links-nav{width:100%;display:block;visibility:visible}}:host([color=darkest]){--pfe-jump-links--BackgroundColor:var(--pfe-theme--color--surface--darkest, #151515);--pfe-jump-links--context:var(--pfe-theme--color--surface--darkest--context, dark);border:1px solid #6a6e73;border:var(--pfe-theme--surface--border-width,1px) var(--pfe-theme--surface--border-style,solid) var(--pfe-theme--color--ui-disabled--text,#6a6e73)}:host([color=darkest]) button[aria-expanded=true],:host([color=darkest]) pfe-accordion-header,:host([color=darkest]) pfe-accordion-panel{--pfe-accordion--BackgroundColor:var(--pfe-theme--color--surface--darkest, #151515);--pfe-accordion--context:var(--pfe-theme--color--surface--darkest--context, dark);--pfe-jump-links--BackgroundColor:var(--pfe-theme--color--surface--darkest, #151515);--pfe-jump-links--context:var(--pfe-theme--color--surface--darkest--context, dark)}:host([color=darkest]) ::slotted([slot=pfe-jump-links-nav--heading]){color:#fff;color:var(--pfe-theme--color--text--on-dark,#fff)}:host([color=darkest]) ul{border-left:1px solid #6a6e73;border-left:var(--pfe-theme--surface--border-width,1px) var(--pfe-theme--surface--border-style,solid) var(--pfe-theme--color--text--muted,#6a6e73)}:host([color=darkest]) ul li[active]{border-left:3px solid #73bcf7;border-left:var(--pfe-theme--ui--border-width--active,3px) var(--pfe-theme--surface--border-style,solid) var(--pfe-theme--color--link--on-dark,#73bcf7)}:host([color=darkest]) ul a{color:#d2d2d2;color:var(--pfe-theme--color--text--muted--on-dark,#d2d2d2)}:host([color=darkest]) ul a:hover{color:#fff;color:var(--pfe-theme--color--text--on-dark,#fff)}:host([color=darkest]) ul a[active]{color:#fff;color:var(--pfe-theme--color--text--on-dark,#fff)}:host([color=darkest]) ul a:focus::after{border-color:#73bcf7;border-color:var(--pfe-theme--color--link--on-dark,#73bcf7)}:host([horizontal]){padding:0;top:0;top:var(--pfe-jump-links-panel--offset,0);width:100%}:host([horizontal]) nav{min-height:calc(16px * 5.5);min-height:calc(var(--pfe-theme--container-spacer,16px) * 5.5);background-color:#f0f0f0;background-color:var(--pfe-theme--color--surface--lighter,#f0f0f0);--context:var(--pfe-theme--color--surface--lighter--context, light);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative}:host([horizontal]) nav .pfe-jump-links-nav__heading{display:none}:host([horizontal]) nav ::slotted([slot=pfe-jump-links-nav--logo]){position:absolute;left:0;max-height:calc(16px * 3.5);max-height:calc(var(--pfe-theme--container-spacer,16px) * 3.5);max-width:calc(16px * 14);max-width:calc(var(--pfe-theme--container-spacer,16px) * 14);top:calc(16px * 1);top:calc(var(--pfe-theme--container-spacer,16px) * 1)}@media (max-width:991px){:host([horizontal]) nav ::slotted([slot=pfe-jump-links-nav--logo]){left:calc(16px * 2);left:calc(var(--pfe-theme--container-spacer,16px) * 2)}}@media (min-width:992px){:host([horizontal]) nav ::slotted([slot=pfe-jump-links-nav--logo]){left:calc(16px * 4);left:calc(var(--pfe-theme--container-spacer,16px) * 4)}}:host([horizontal]) nav ::slotted([slot=pfe-jump-links-nav--cta]){position:absolute;top:calc(16px * 1);top:calc(var(--pfe-theme--container-spacer,16px) * 1)}@media (max-width:991px){:host([horizontal]) nav ::slotted([slot=pfe-jump-links-nav--cta]){right:calc(16px * 2);right:calc(var(--pfe-theme--container-spacer,16px) * 2)}}@media (min-width:992px){:host([horizontal]) nav ::slotted([slot=pfe-jump-links-nav--cta]){right:calc(16px * 4);right:calc(var(--pfe-theme--container-spacer,16px) * 4)}}:host([horizontal]) #container{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;justify-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}:host([horizontal]) ul{border:none;text-align:center;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:0;width:auto;margin:0 auto}:host([horizontal]) ul li{padding:0 calc(16px * 1.5);padding:0 calc(var(--pfe-theme--container-spacer,16px) * 1.5);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:calc(16px * 5);height:calc(var(--pfe-theme--container-spacer,16px) * 5);-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;border-top:4px solid transparent;border-top:var(--pfe-theme--surface--border-width--heavy,4px) var(--pfe-theme--surface--border-style,solid) transparent;border-bottom:4px solid transparent;border-bottom:var(--pfe-theme--surface--border-width--heavy,4px) var(--pfe-theme--surface--border-style,solid) transparent;border-left:none;border-right:none}:host([horizontal]) ul li[active]{border-top:4px solid #06c;border-top:var(--pfe-theme--surface--border-width--heavy,4px) var(--pfe-theme--surface--border-style,solid) var(--pfe-theme--color--ui-accent,#06c)}:host([horizontal]) ul a{text-decoration:none;color:#6a6e73;color:var(--pfe-theme--color--ui-disabled--text,#6a6e73)}:host([horizontal]) ul a[active]{color:#151515;color:var(--pfe-theme--color--text,#151515)}:host([horizontal]) ul a:hover{color:#151515;color:var(--pfe-theme--color--text,#151515)}@media (max-width:991px){:host([horizontal]) nav{min-height:calc(16px * 5.5);min-height:calc(var(--pfe-theme--container-spacer,16px) * 5.5);background-color:#f0f0f0;background-color:var(--pfe-theme--color--surface--lighter,#f0f0f0);--context:var(--pfe-theme--color--surface--lighter--context, light)}:host([horizontal]) .pfe-jump-links-nav{display:none}}:host([hidden]){display:none} /*# sourceMappingURL=pfe-jump-links-nav.min.css.map */</style>\n${this.horizontal ? `\n\n<nav>\n  <slot class=\"pfe-jump-links-nav__heading\" name=\"pfe-jump-links-nav--heading\">\n    <h3>${this.srText ? this.srText : \"Jump to section\"}</h3>\n  </slot>\n  <slot class=\"pfe-jump-links-nav__logo\" name=\"pfe-jump-links-nav--logo\"></slot>\n  <div id=\"container\"></div>\n  <slot class=\"pfe-jump-links-nav__cta\" name=\"pfe-jump-links-nav--cta\"></slot>\n</nav>\n` : `\n\n<pfe-accordion>\n  <pfe-accordion-header>\n    <h3>${this.srText ? this.srText : \"Jump to section\"}</h3>\n  </pfe-accordion-header>\n  <pfe-accordion-panel>\n    <nav>\n      <slot class=\"pfe-jump-links-nav__heading\" name=\"pfe-jump-links-nav--heading\">\n        <h3>${this.srText ? this.srText : \"Jump to section\"}</h3>\n      </slot>\n      <slot class=\"pfe-jump-links-nav__logo\" name=\"pfe-jump-links-nav--logo\"></slot>\n      <div id=\"container\"></div>\n      <slot class=\"pfe-jump-links-nav__cta\" name=\"pfe-jump-links-nav--cta\"></slot>\n    </nav>\n  </pfe-accordion-panel>\n</pfe-accordion>`}`;\n  }\n\n  static get tag() {\n    return \"pfe-jump-links-nav\";\n  }\n\n  get templateUrl() {\n    return \"pfe-jump-links-nav.html\";\n  }\n\n  get styleUrl() {\n    return \"pfe-jump-links-nav.scss\";\n  }\n\n  static get PfeType() {\n    return PFElement.PfeTypes.Content;\n  }\n\n  static get properties() {\n    return {\n      autobuild: {\n        title: \"Autobuild\",\n        type: Boolean\n      },\n      horizontal: {\n        title: \"Horizontal\",\n        type: Boolean\n      },\n      srText: {\n        title: \"Screen reader text\",\n        type: String,\n        default: \"Jump to section\"\n      },\n      color: {\n        title: \"Color\",\n        type: String,\n        values: [\"darkest\"]\n      },\n      // @TODO: Deprecated in 1.0\n      oldColor: {\n        alias: \"color\",\n        attr: \"pfe-color\"\n      }\n    };\n  }\n\n  get header() {\n    if (!this.horizontal) return this.shadowRoot.querySelector(\"pfe-accordion-header\");\n\n    return this.getSlot(\"pfe-jump-links-nav--heading\");\n  }\n\n  get panel() {\n    // Use the ID from the navigation to target the panel elements\n    // Automatically if there's only one set of tags on the page\n    if (this.id) {\n      this.removeAttribute(\"hidden\");\n      return document.querySelector(`[scrolltarget=${this.id}]`);\n    } else {\n      const panels = document.querySelectorAll(PfeJumpLinksPanel.tag);\n      if (panels.length === 1) {\n        this.removeAttribute(\"hidden\");\n        panels[0].id = this.randomId;\n        return panels[0];\n      } else if (panels.length > 1) {\n        this.warn(\n          `Cannot locate a panel that is connected to this navigation element.${\n            this.id ? ` Please add scrolltarget=\"${this.id}\" to the appropriate panel.` : \"\"\n          }`\n        );\n      } else {\n        this.warn(\n          `Cannot locate any panels on this page. Please add a ${PfeJumpLinksPanel.tag} element around the content you want to target.`\n        );\n      }\n    }\n\n    // Hide the navigation if no content can be found\n    this.setAttribute(\"hidden\", \"\");\n    return;\n  }\n\n  get links() {\n    return this._menuContainer.querySelectorAll(\"a\");\n  }\n\n  constructor() {\n    super(PfeJumpLinksNav, {\n      type: PfeJumpLinksNav.PfeType\n    });\n\n    this._buildNav = this._buildNav.bind(this);\n    this._buildItem = this._buildItem.bind(this);\n    this._init = this._init.bind(this);\n    this._reportHeight = this._reportHeight.bind(this);\n    this.closeAccordion = this.closeAccordion.bind(this);\n    this._closeAccordion = this._closeAccordion.bind(this);\n\n    this._observer = new MutationObserver(this._init);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    // Templated elements in the shadow DOM\n    this._menuContainer = this.shadowRoot.querySelector(\"#container\");\n    this._navTag = this.shadowRoot.querySelector(\"nav\");\n\n    this._init();\n\n    // Trigger the mutation observer\n    this._observer.observe(this, {\n      childList: true,\n      subtree: true,\n      characterData: true,\n      attributes: true\n    });\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    this._observer.disconnect();\n    if (this.panel) this.panel.removeEventListener(PfeJumpLinksPanel.events.change, this._init);\n\n    [...this.links].forEach(link => {\n      link.removeEventListener(\"click\", this.closeAccordion);\n    });\n  }\n\n  closeAccordion() {\n    // @TODO\n    // Create JSON tokens for media query breakpoints\n    if (window.matchMedia(\"(min-width: 992px)\").matches) {\n      return;\n    }\n    setTimeout(this._closeAccordion, 750);\n  }\n\n  _closeAccordion() {\n    this.shadowRoot.querySelector(\"pfe-accordion\").collapseAll();\n  }\n\n  rebuild() {\n    this._buildNav();\n  }\n\n  _buildItem(data, isSubSection = false) {\n    let item = document.createElement(\"li\");\n    item.className = \"pfe-jump-links-nav__item\";\n\n    let link = document.createElement(\"a\");\n    link.className = \"pfe-jump-links-nav__link\";\n    link.href = `#${data.target}`;\n    link.setAttribute(\"data-target\", data.target);\n    link.innerHTML = data.content;\n\n    if (data.subsection) link.classList.add(\"has-sub-section\");\n    if (isSubSection) link.classList.add(\"sub-section\");\n\n    item.appendChild(link);\n    return item;\n  }\n\n  _buildNav() {\n    Promise.all([customElements.whenDefined(PfeJumpLinksPanel.tag)]).then(() => {\n      let list = [];\n      if (this.panel) {\n        let item = {};\n        let has_subsection = false;\n        // Build an object with all the information we need to dynamically build the navigation\n        this.panel.sections.forEach(sectionHeading => {\n          let is_subsection = sectionHeading.classList.contains(\"sub-section\");\n\n          // Empty out the item object if this isn't a nested section\n          if (!has_subsection && !is_subsection) {\n            if (Object.keys(item).length > 0) list.push(item);\n            item = {};\n          }\n\n          // Get ID for the navigation\n          let id = sectionHeading.id;\n          if (!id && sectionHeading.previousElementSibling && sectionHeading.previousElementSibling.id)\n            id = sectionHeading.previousElementSibling.id;\n\n          if (is_subsection) {\n            if (item.subsection) {\n              item.subsection.push({\n                target: id,\n                content: sectionHeading.innerHTML\n              });\n            } else {\n              item.subsection = [\n                {\n                  target: id,\n                  content: sectionHeading.innerHTML\n                }\n              ];\n            }\n          } else {\n            item = {\n              target: id,\n              content: sectionHeading.innerHTML\n            };\n          }\n\n          has_subsection = sectionHeading.classList.contains(\"has-sub-section\");\n        });\n      }\n\n      let wrapper = document.createElement(\"ul\");\n      wrapper.className = \"pfe-jump-links-nav\";\n\n      list.forEach(item => {\n        let child = this._buildItem(item);\n\n        if (item.subsection) {\n          let nested = document.createElement(\"ul\");\n          nested.className = \"sub-nav\";\n          item.subsection.forEach(subsection => {\n            nested.appendChild(this._buildItem(subsection, true));\n          });\n\n          child.appendChild(nested);\n        }\n\n        wrapper.appendChild(child);\n      });\n\n      this._menuContainer.innerHTML = wrapper.outerHTML;\n    });\n  }\n\n  _isValidLightDom() {\n    if (!this.hasLightDOM()) {\n      this.warn(`You must have a <ul> tag in the light DOM`);\n      return false;\n    }\n    if ((this.hasSlot(\"pfe-jump-links-nav--logo\") || this.hasSlot(\"pfe-jump-links-nav--link\")) && !this.horizontal) {\n      this.warn(`logo and link slots NOT supported in vertical jump links`);\n    }\n    if (this.children[1].tagName !== \"UL\") {\n      if (!this.horizontal) {\n        this.warn(`The top-level list of links MUST be a <ul>`);\n      }\n\n      return false;\n    }\n    if (Number.isInteger(Number(this.customVar))) {\n      this.warn(\n        \"Using an integer with a unit is not supported for custom property --pfe-jump-links-panel--offset. The component strips the unit using parseInt(). For example so 1rem would become 1 and behave as if you had entered 1px. Values with a pixel unit will behave correctly.\"\n      );\n    }\n\n    return true;\n  }\n\n  _reportHeight() {\n    const cssVarName = `--${this.tag}--Height--actual`;\n    const styles = window.getComputedStyle(this);\n\n    let height = styles.getPropertyValue(\"height\");\n    if (window.matchMedia(\"(min-width: 992px)\").matches) {\n      height = \"0px\";\n    }\n\n    if (this.panel) this.panel.style.setProperty(cssVarName, height);\n  }\n\n  _init() {\n    if (window.ShadyCSS) this._observer.disconnect();\n\n    //Check that the light DOM is there\n    if (!this.autobuild && this._isValidLightDom()) {\n      const menu = this.querySelector(\"ul\");\n\n      // If the class is not already on the list wrapper\n      if (!menu.classList.contains(\"pfe-jump-links-nav\")) {\n        menu.classList.add(\"pfe-jump-links-nav\");\n      }\n\n      // Move the menu into the shadow DOM\n      this._menuContainer.innerHTML = menu.outerHTML;\n\n      // Build the label for screen readers\n      let label = document.createElement(\"h2\");\n      label.className = \"sr-only\";\n      label.setAttribute(\"hidden\", \"\");\n      label.innerText = this.srText;\n\n      this._navTag.prepend(label);\n    } else {\n      this._buildNav();\n    }\n\n    this._reportHeight();\n\n    // @TODO: Is this doing anything?\n    // Set up a resize listener\n    window.addEventListener(\"resize\", () => {});\n\n    // Attach the event listeners\n    [...this.links].forEach(link => {\n      link.addEventListener(\"click\", this.closeAccordion);\n    });\n\n    if (this.panel && this.autobuild) this.panel.addEventListener(PfeJumpLinksPanel.events.change, this._init);\n\n    // Trigger the mutation observer\n    if (window.ShadyCSS) {\n      this._observer.observe(this, {\n        childList: true,\n        subtree: true,\n        characterData: true,\n        attributes: true\n      });\n    }\n  }\n}\n\nexport default PfeJumpLinksNav;\n","/*!\n * PatternFly Elements: PfeJumpLinks 1.0.0\n * @license\n * Copyright 2020 Red Hat, Inc.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * \n*/\n\nimport PFElement from \"../../pfelement/dist/pfelement\";\n\nimport PfeJumpLinksNav from \"./pfe-jump-links-nav.js\";\nimport PfeJumpLinksPanel from \"./pfe-jump-links-panel.js\";\n\n// @TODO: Deprecate the parent wrapper?\nclass PfeJumpLinks extends PFElement {\n\n  // Injected at build-time\n  static get version() {\n    return \"1.0.0\";\n  }\n\n  // Injected at build-time\n  get html() {\n    return `\n<style>:host{display:block}:host([hidden]){display:none} /*# sourceMappingURL=pfe-jump-links.min.css.map */</style>\n<slot></slot>`;\n  }\n\n  // Injected at build-time\n  static get slots() {\n    return {\"default\":{\"title\":\"Default slot\",\"type\":\"array\",\"namedSlot\":false,\"items\":{\"oneOf\":[{\"$ref\":\"raw\"}]}}};\n  }\n\n  static get tag() {\n    return \"pfe-jump-links\";\n  }\n\n  get schemaUrl() {\n    return \"pfe-jump-links.json\";\n  }\n\n  get templateUrl() {\n    return \"pfe-jump-links.html\";\n  }\n\n  get styleUrl() {\n    return \"pfe-jump-links.scss\";\n  }\n\n  static get PfeType() {\n    return PFElement.PfeTypes.Content;\n  }\n\n  constructor() {\n    super(PfeJumpLinks, { type: PfeJumpLinks.PfeType });\n  }\n}\n\nPFElement.create(PfeJumpLinksPanel);\nPFElement.create(PfeJumpLinksNav);\nPFElement.create(PfeJumpLinks);\n\nexport default PfeJumpLinks;\n"],"names":["PfeJumpLinksPanel","sectionMargin","parseInt","customVar","scrolltarget","document","querySelector","navs","querySelectorAll","length","item","warn","id","change","tag","activeNavItem","PFElement","PfeTypes","Content","offset","title","type","Number","observer","String","PfeType","currentActive","_slot","shadowRoot","_init","bind","_makeSpacers","_isValidMarkup","_handleResize","_scrollCallback","_mutationCallback","_observer","MutationObserver","cssVariable","nav","autobuild","rebuild","observe","childList","subtree","characterData","attributes","window","addEventListener","disconnect","removeEventListener","oldVal","newVal","childElementCount","sections","forEach","parentDiv","section","parentNode","html","createElement","insertBefore","spacer","previousElementSibling","classList","add","removeAttribute","Promise","all","customElements","whenDefined","then","menu_links","links","_reportHeight","link","activeLink","contains","setAttribute","emitEvent","events","detail","oldLink","remove","Object","keys","obj","TypeError","k","p","prototype","hasOwnProperty","call","push","Array","_removeActive","ShadyCSS","sectionArr","matches","filter","scrollY","offsetTop","offsetValue","reverse","current","indexOf","_removeAllActive","_makeActive","PfeJumpLinksNav","horizontal","srText","getSlot","panels","randomId","_menuContainer","Boolean","default","color","values","oldColor","alias","attr","_buildNav","_buildItem","closeAccordion","_closeAccordion","_navTag","panel","matchMedia","setTimeout","collapseAll","data","isSubSection","className","href","target","innerHTML","content","subsection","appendChild","list","has_subsection","is_subsection","sectionHeading","wrapper","child","nested","outerHTML","hasLightDOM","hasSlot","children","tagName","isInteger","cssVarName","styles","getComputedStyle","height","getPropertyValue","style","setProperty","_isValidLightDom","menu","label","innerText","prepend","PfeJumpLinks","create"],"mappings":"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"}