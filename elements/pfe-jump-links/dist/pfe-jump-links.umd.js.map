{"version":3,"file":"pfe-jump-links.umd.js","sources":["../_temp/pfe-jump-links.umd.js"],"sourcesContent":["/*!\n * PatternFly Elements: PfeJumpLinks 1.0.0-prerelease.49\n * @license\n * Copyright 2020 Red Hat, Inc.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * \n*/\n\nimport PFElement from \"../../pfelement/dist/pfelement.umd\";\n\nconst pfeJumpLinksNavObserverConfig = {\n  childList: true,\n  subtree: true,\n  characterData: true,\n  attributes: true\n};\n\nconst pfeJumpLinksPanelObserverConfig = {\n  childList: true,\n  subtree: true,\n  characterData: true,\n  attributes: true\n};\n\nclass PfeJumpLinks extends PFElement {\n  static get version() {\n    return \"1.0.0-prerelease.49\";\n  }\n\n  get html() {\n    return `<style>:host{display:block}:host([hidden]){display:none}\n/*# sourceMappingURL=pfe-jump-links.min.css.map */\n</style><slot></slot>`;\n  }\n\n  static get properties() {\n    return {};\n  }\n\n  static get slots() {\n    return {\"default\":{\"title\":\"Default slot\",\"type\":\"array\",\"namedSlot\":false,\"items\":{\"oneOf\":[{\"$ref\":\"raw\"}]}}};\n  }\n  static get tag() {\n    return \"pfe-jump-links\";\n  }\n\n  get schemaUrl() {\n    return \"pfe-jump-links.json\";\n  }\n\n  get templateUrl() {\n    return \"pfe-jump-links.html\";\n  }\n\n  get styleUrl() {\n    return \"pfe-jump-links.scss\";\n  }\n\n  static get PfeType() {\n    return PFElement.PfeTypes.Content;\n  }\n\n  constructor() {\n    super(PfeJumpLinks, { type: PfeJumpLinks.PfeType });\n  }\n}\n\nclass PfeJumpLinksNav extends PFElement {\n  static get version() {\n    return \"1.0.0-prerelease.49\";\n  }\n\n  get html() {\n    return `<style>:host{--pfe-jump-links--horizontal-spacer:calc(var(--pfe-theme--container-padding, 16px) * 2);--pfe-jump-links--vertical-spacer:calc(var(--pfe-theme--container-padding, 16px) * 2);--pfe-jump-links--BackgroundColor:var(--pfe-theme--color--surface--lightest, #fff);--pfe-jump-links--BorderColor:var(--pfe-theme--color--ui-base, #0477a4);--pfe-jump-links--FontSize:var(--pfe-theme--font-size--heading--epsilon, 16px);--pfe-jump-links__heading--FontSize:var(--pfe-theme--font-size--heading--zeta, 14px);--pfe-jump-links__link--horizontal-spacer:calc(var(--pfe-theme--content-spacer, 24px) / 3);--pfe-jump-links__link--vertical-spacer:calc(var(--pfe-theme--content-spacer, 24px) / 6);-webkit-box-sizing:border-box;box-sizing:border-box;font-family:Overpass,Overpass,Helvetica,helvetica,arial,sans-serif;font-family:var(--pfe-theme--font-family, \"Overpass\", Overpass, Helvetica, helvetica, arial, sans-serif);font-weight:500;font-weight:var(--pfe-theme--font-weight--normal,500);font-weight:400;display:block;position:-webkit-sticky;position:sticky;top:calc(16px * 4);top:calc(var(--pfe-theme--container-spacer,16px) * 4);padding-left:0}@media (min-width:992px){:host{padding:var(--pfe-jump-links--vertical-spacer) var(--pfe-jump-links--horizontal-spacer)}}:host[pfe-sticky=false]{position:relative}:host nav{visibility:visible}:host pfe-accordion{--pfe-accordion--BackgroundColor:transparent;--pfe-accordion--BorderColor:#ccc;--pfe-accordion--BorderColor--accent:transparent;--pfe-accordion--accent:transparent;--pfe-accordion--BorderColor:transparent;--pfe-accordion--BorderColor--accent:transparent;--pfe-theme--surface--border-style:solid;--pfe-theme--color--surface--border:transparent;--pfe-theme--color--ui-base--on-dark:transparent;--pfe-theme--color--ui-base:transparent}@media (min-width:992px){:host pfe-accordion{--pfe-accordion--base--Padding:0!important}}:host pfe-accordion button{text-decoration:none}:host pfe-accordion-header{position:-webkit-sticky;position:sticky;top:0}nav{margin:0;list-style:none;padding:0}nav ::slotted([slot=pfe-jump-links-nav--heading]){margin:0;margin-bottom:calc(16px * 1);margin-bottom:calc(var(--pfe-theme--container-spacer,16px) * 1);font-size:var(--pfe-jump-links__heading--FontSize);font-weight:400;text-transform:uppercase}@media (max-width:991px){nav ::slotted([slot=pfe-jump-links-nav--heading]){display:none}}nav .sub-nav{margin:0;padding:0;border:none!important;overflow-y:hidden;-webkit-transition:-webkit-box-flex 1s linear,-webkit-flex 1s linear;transition:-webkit-box-flex 1s linear,-webkit-flex 1s linear;transition:flex 1s linear;transition:flex 1s linear,-webkit-box-flex 1s linear,-webkit-flex 1s linear,-ms-flex 1s linear;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:0;-webkit-flex:0;-ms-flex:0;flex:0}nav .sub-nav li{border:none!important}nav li{border-left:4px solid transparent;border-left:var(--pfe-theme--surface--border-width--heavy,4px) solid transparent;display:block;text-decoration:none}nav li.expand .sub-nav{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}nav li.expand .sub-section{display:table;height:auto}nav a{display:table;text-decoration:none;font-size:var(--pfe-jump-links--FontSize);padding:calc(var(--pfe-jump-links__link--vertical-spacer) * 2) calc(var(--pfe-jump-links__link--horizontal-spacer) * 2);line-height:1.5;line-height:var(--pfe-theme--line-height,1.5);position:relative}nav a.has-sub-section{padding-bottom:calc(var(--pfe-jump-links__link--vertical-spacer))}nav a.sub-section{margin-left:calc(16px * .75);margin-left:calc(var(--pfe-theme--container-spacer,16px) * .75);font-size:calc(var(--pfe-jump-links--FontSize) * .85);padding:calc(var(--pfe-jump-links__link--vertical-spacer) * 1) calc(var(--pfe-jump-links__link--horizontal-spacer) * 2)}@media (min-width:992px){nav a.sub-section{display:none}}nav a.sub-section:last-child{padding-bottom:calc(var(--pfe-jump-links__link--horizontal-spacer) * 1)}nav a::after{content:\"\";position:absolute;width:calc(100% - 4px);height:calc(100% - 4px);top:0;left:0}nav a:focus{outline:0}nav a:focus::after{border-radius:3px;border:2px solid #06c;border:2px solid var(--pfe-theme--color--link,#06c)}:host{background-color:var(--pfe-jump-links--BackgroundColor)}@media (max-width:991px){:host pfe-accordion{border:1px solid #d2d2d2;border:1px solid var(--pfe-theme--color--ui-disabled,#d2d2d2)}:host pfe-accordion-header{background-color:#fff;background-color:var(--pfe-theme--color--surface--lightest,#fff);--theme:light}}@media (min-width:992px){:host{border:1px solid transparent}}:host ::slotted([slot=pfe-jump-links-nav--heading]){color:#333;color:var(--pfe-theme--text,#333)}:host ul{padding:0;border-left:1px solid #d2d2d2;border-left:var(--pfe-theme--surface--border-width,1px) var(--pfe-theme--surface--border-style,solid) var(--pfe-theme--color--ui-disabled,#d2d2d2)}:host li[active]{border-left-color:var(--pfe-jump-links--BorderColor)}:host a{color:#797979;color:var(--pfe-theme--color--ui-disabled--text,#797979);position:relative}:host a:hover{color:#131313;color:var(--pfe-theme--color--surface--darkest,#131313)}:host a[active]{color:#131313;color:var(--pfe-theme--color--surface--darkest,#131313)}:host a::after{content:\"\";position:absolute;width:calc(100% - 4px);height:calc(100% - 4px);top:0;left:0}:host a:focus{outline:0}:host a:focus::after{border-radius:3px;border:2px solid #9cf;border:2px solid var(--pfe-theme--color--link--on-dark,#9cf)}:host([pfe-color=darkest]){--theme:dark;background-color:#131313;background-color:var(--pfe-theme--color--surface--darkest,#131313);border:1px solid #797979;border:1px solid var(--pfe-theme--color--ui-disabled--text,#797979)}:host([pfe-color=darkest]) button[aria-expanded=true],:host([pfe-color=darkest]) pfe-accordion-header,:host([pfe-color=darkest]) pfe-accordion-panel{--pfe-accordion--BackgroundColor:var(--pfe-theme--color--surface--darkest, #131313);--pfe-jump-links--BackgroundColor:var(--pfe-theme--color--surface--darkest, #131313)}:host([pfe-color=darkest]) ::slotted([slot=pfe-jump-links-nav--heading]){color:#ececec;color:var(--pfe-theme--color--surface--lighter,#ececec)}:host([pfe-color=darkest]) ul{border-left:1px solid #797979;border-left:1px solid var(--pfe-theme--color--ui-disabled--text,#797979)}:host([pfe-color=darkest]) ul li[active]{border-left:3px solid #e00;border-left:3px var(--pfe-theme--surface--border-style,solid) var(--pfe-theme--color--ui-accent,#e00)}:host([pfe-color=darkest]) ul a{color:#ccc;color:var(--pfe-theme--color--ui-complement--focus--on-dark,#ccc)}:host([pfe-color=darkest]) ul a:hover{color:#ccc;color:var(--pfe-theme--color--ui-complement--hover--on-dark,#ccc)}:host([pfe-color=darkest]) ul a[active]{color:#fff;color:var(--pfe-theme--color--ui-complement--on-dark,#fff)}:host([pfe-color=darkest]) ul a::after{content:\"\";position:absolute;width:calc(100% - 4px);height:calc(100% - 4px);top:0;left:0}:host([pfe-color=darkest]) ul a:focus{outline:0}:host([pfe-color=darkest]) ul a:focus::after{border-radius:3px;border:2px solid #9cf;border:2px solid var(--pfe-theme--color--link--on-dark,#9cf)}:host([hidden]){display:none}:host([horizontal]){padding:0;top:0;width:100%}:host([horizontal]) nav{min-height:calc(16px * 5.5);min-height:calc(var(--pfe-theme--container-spacer,16px) * 5.5);background-color:#ececec;background-color:var(--pfe-theme--color--surface--lighter,#ececec);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative}:host([horizontal]) nav .pfe-jump-links-nav__heading{display:none}:host([horizontal]) nav ::slotted([slot=pfe-jump-links-nav--logo]){position:absolute;left:0;max-height:calc(16px * 3.5);max-height:calc(var(--pfe-theme--container-spacer,16px) * 3.5);max-width:calc(16px * 14);max-width:calc(var(--pfe-theme--container-spacer,16px) * 14);top:calc(16px * 1);top:calc(var(--pfe-theme--container-spacer,16px) * 1)}@media (max-width:991px){:host([horizontal]) nav ::slotted([slot=pfe-jump-links-nav--logo]){left:calc(16px * 2);left:calc(var(--pfe-theme--container-spacer,16px) * 2)}}@media (min-width:992px){:host([horizontal]) nav ::slotted([slot=pfe-jump-links-nav--logo]){left:calc(16px * 4);left:calc(var(--pfe-theme--container-spacer,16px) * 4)}}:host([horizontal]) nav ::slotted([slot=pfe-jump-links-nav--cta]){position:absolute;top:calc(16px * 1);top:calc(var(--pfe-theme--container-spacer,16px) * 1)}@media (max-width:991px){:host([horizontal]) nav ::slotted([slot=pfe-jump-links-nav--cta]){right:calc(16px * 2);right:calc(var(--pfe-theme--container-spacer,16px) * 2)}}@media (min-width:992px){:host([horizontal]) nav ::slotted([slot=pfe-jump-links-nav--cta]){right:calc(16px * 4);right:calc(var(--pfe-theme--container-spacer,16px) * 4)}}:host([horizontal]) #container{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;justify-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}:host([horizontal]) ul{border:none;display:block;text-align:center;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:0;width:auto;margin:0;margin-left:auto;margin-right:auto}:host([horizontal]) ul li{padding:0 calc(16px * 1.5);padding:0 calc(var(--pfe-theme--container-spacer,16px) * 1.5);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:calc(16px * 5);height:calc(var(--pfe-theme--container-spacer,16px) * 5);-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;border-top:4px solid transparent;border-bottom:4px solid transparent;border-left:none;border-right:none}:host([horizontal]) ul li[active]{border-top:4px solid #e00;border-top:4px solid var(--pfe-theme--color--ui-accent,#e00)}:host([horizontal]) ul a{text-decoration:none;color:#797979;color:var(--pfe-theme--color--ui-disabled--text,#797979)}:host([horizontal]) ul a[active]{color:#131313;color:var(--pfe-theme--color--surface--darkest,#131313)}:host([horizontal]) ul a:hover{color:#131313;color:var(--pfe-theme--color--surface--darkest,#131313)}@media (max-width:991px){:host([horizontal]) nav{min-height:calc(16px * 5.5);min-height:calc(var(--pfe-theme--container-spacer,16px) * 5.5);background-color:#ececec;background-color:var(--pfe-theme--color--surface--lighter,#ececec)}:host([horizontal]) .pfe-jump-links-nav{display:none}}@media (min-width:992px){pfe-accordion-header{visibility:collapse!important;display:none}pfe-accordion-panel{visibility:collapse;display:none;opacity:1;display:block}pfe-accordion-panel>pfe-jump-links-nav{width:100%;display:block;visibility:visible}}\n/*# sourceMappingURL=pfe-jump-links-nav.min.css.map */\n</style>\n  ${this.hasAttribute(\"horizontal\") ? `` :\n  `<pfe-accordion>\n    <pfe-accordion-header>\n    </pfe-accordion-header>\n    <pfe-accordion-panel>`\n      }\n      <nav>\n        <slot class=\"pfe-jump-links-nav__heading\" name=\"pfe-jump-links-nav--heading\" id=\"pfe-jump-links-nav--heading\">\n        </slot>\n        <slot class=\"pfe-jump-links-nav__logo\" name=\"pfe-jump-links-nav--logo\"></slot>\n        <div id=\"container\"></div>\n        <slot class=\"pfe-jump-links-nav__cta\" name=\"pfe-jump-links-nav--cta\"></slot>\n      </nav>\n      ${this.hasAttribute(\"horizontal\") ? `` :\n      `</pfe-accordion-panel>\n  </pfe-accordion>`\n  }`;\n  }\n  static get tag() {\n    return \"pfe-jump-links-nav\";\n  }\n\n  get schemaUrl() {\n    return \"pfe-jump-links-nav.json\";\n  }\n\n  get templateUrl() {\n    return \"pfe-jump-links-nav.html\";\n  }\n\n  get styleUrl() {\n    return \"pfe-jump-links-nav.scss\";\n  }\n\n  static get PfeType() {\n    return PFElement.PfeTypes.Content;\n  }\n\n  constructor() {\n    super(PfeJumpLinksNav, { type: PfeJumpLinksNav.PfeType });\n\n    this._buildNav = this._buildNav.bind(this);\n    this._mutationCallback = this._mutationCallback.bind(this);\n    this._menuContainer = this.shadowRoot.querySelector(\"#container\");\n    this._observer = new MutationObserver(this._mutationCallback);\n    this._reportHeight = this._reportHeight.bind(this);\n    this.panel = document.querySelector(`[scrolltarget=${this.id}]`);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    //Check that the light DOM is there\n    if (this.hasAttribute(\"autobuild\")) {\n      this._buildNav();\n    } else {\n      //Check that the light DOM is valid\n      if (this._isValidLightDom()) {\n        const menu = this.querySelector(\"ul\");\n        menu.classList.add(\"pfe-jump-links-nav\");\n        this._menuContainer.innerHTML = menu.outerHTML;\n\n        let div = document.createElement(\"div\");\n\n        div.innerHTML = `<h2 class=\"sr-only\" hidden>${this.getAttribute(\n          \"sr-text\"\n        )}</h2>`;\n\n        if (this.getAttribute(\"sr-text\")) {\n          this.shadowRoot.querySelector(\"nav\").prepend(div);\n        }\n\n        let html = \"\";\n        if (this.querySelector(\".pfe-jump-links-nav--heading\")) {\n          html = this.querySelector(\".pfe-jump-links-nav--heading\").cloneNode(\n            true\n          );\n        }\n        if (!this.hasAttribute(\"horizontal\")) {\n          if (html) {\n            this.shadowRoot\n              .querySelector(\"pfe-accordion-header\")\n              .appendChild(html);\n          }\n        } else {\n          this.shadowRoot\n            .querySelector(\"pfe-accordion-header\")\n            .appendChild(\n              document.createElement(\"h3#pfe-jump-links-nav--heading\")\n            );\n          this.shadowRoot.querySelector(\n            \"#pfe-jump-links-nav--heading\"\n          ).innerHTML = \"Jump to section\";\n        }\n      }\n    }\n    this._reportHeight();\n\n    this._observer.observe(this, pfeJumpLinksNavObserverConfig);\n\n    this.panel = document.querySelector(`[scrolltarget=\"${this.id}\"]`);\n\n    this.panel.addEventListener(\n      PfeJumpLinksPanel.events.change,\n      this._buildNav\n    );\n  }\n\n  disconnectedCallback() {\n    this._observer.disconnect();\n    this.panel.removeEventListener(\n      PfeJumpLinksPanel.events.change,\n      this._buildNav\n    );\n    this.removeEventListener(\"click\");\n  }\n\n  _rebuildNav() {\n    this._buildNav();\n  }\n\n  _buildNav() {\n    const buildLinkList = () => {\n      let linkList = ``;\n      if (!this.panel) {\n        this.panel = document.querySelector(`[scrolltarget=\"${this.id}\"]`);\n      }\n      let panelSections = this.panel.querySelectorAll(\n        \".pfe-jump-links-panel__section\"\n      );\n\n      for (let i = 0; i < panelSections.length; i++) {\n        let arr = [...panelSections];\n        if (arr[i].classList.contains(\"has-sub-section\")) {\n          let linkListItem = `\n          <li class=\"pfe-jump-links-nav__item\">\n            <a\n              class=\"pfe-jump-links-nav__link has-sub-section\"\n              href=\"#${arr[i].id}\"\n              data-target=\"${arr[i].id}\">\n                ${arr[i].innerHTML}\n            </a>\n            <ul class=\"sub-nav\">\n        `;\n          linkList += linkListItem;\n        } else if (arr[i].classList.contains(\"sub-section\")) {\n          let linkSubItem = `\n        <li class=\"pfe-jump-links-nav__item\">\n            <a\n              class=\"pfe-jump-links-nav__link sub-section\"\n              href=\"#${arr[i].id}\"\n              data-target=\"${arr[i].id}\">\n                ${arr[i].innerHTML}\n            </a>\n        </li>`;\n          if (!arr[i + 1].classList.contains(\"sub-section\")) {\n            linkSubItem += `</ul></li>`;\n          }\n          linkList += linkSubItem;\n        } else {\n          let linkListItem = `\n          <li class=\"pfe-jump-links-nav__item\">\n            <a\n              class=\"pfe-jump-links-nav__link\"\n              href=\"#${arr[i].id}\"\n              data-target=\"${arr[i].id}\">\n                ${arr[i].innerHTML}\n            </a>\n          </li>\n        `;\n          linkList += linkListItem;\n        }\n      }\n      return linkList;\n    };\n\n    let html = `\n      <ul class=\"pfe-jump-links-nav\">\n        ${buildLinkList()}\n    `;\n    this.shadowRoot.querySelector(\"#container\").innerHTML = html;\n    let heading = document.createElement(\"h3\");\n    heading.innerHTML = \"Jump to section\";\n    this.shadowRoot.querySelector(\"pfe-accordion-header\").appendChild(heading);\n  }\n\n  _mutationCallback() {\n    if (window.ShadyCSS) {\n      this._observer.disconnect();\n    }\n\n    if (!this.hasAttribute(\"autobuild\")) {\n      const menu = this.querySelector(\"ul\");\n      this._menuContainer.innerHTML = menu.outerHTML;\n    } else if (this.hasAttribute(\"autobuild\")) {\n      this._buildNav();\n    }\n\n    if (window.ShadyCSS) {\n      this._observer.observe(this, pfeJumpLinksNavObserverConfig);\n    }\n  }\n\n  _isValidLightDom() {\n    if (!this.children.length) {\n      console.warn(\n        `${PfeJumpLinks.tag}: You must have a <ul> tag in the light DOM`\n      );\n      return false;\n    }\n    if (\n      (this.has_slot(\"logo\") || this.has_slot(\"link\")) &&\n      !this.hasAttribute(\"horizontal\")\n    ) {\n      console.warn(\n        `${PfeJumpLinks.tag}: logo and link slots NOT supported in vertical jump links`\n      );\n    }\n    if (this.children[1].tagName !== \"UL\") {\n      if (!this.hasAttribute(\"horizontal\")) {\n        console.warn(\n          `${PfeJumpLinks.tag}: The top-level list of links MUST be a <ul>`\n        );\n      }\n\n      return false;\n    }\n\n    return true;\n  }\n\n  _reportHeight() {\n    const cssVarName = `--${this.tag}--Height--actual`;\n    const height = this.clientHeight + \"px\";\n    this.panel.style.setProperty(cssVarName, height);\n  }\n}\n\nclass PfeJumpLinksPanel extends PFElement {\n  static get version() {\n    return \"1.0.0-prerelease.49\";\n  }\n\n  get html() {\n    return `<style>\n/*# sourceMappingURL=pfe-jump-links-panel.min.css.map */\n</style><slot></slot>`;\n  }\n  static get tag() {\n    return \"pfe-jump-links-panel\";\n  }\n\n  get schemaUrl() {\n    return \"pfe-jump-links-panel.json\";\n  }\n\n  get templateUrl() {\n    return \"pfe-jump-links-panel.html\";\n  }\n\n  get styleUrl() {\n    return \"pfe-jump-links-panel.scss\";\n  }\n\n  static get events() {\n    return {\n      change: `${this.tag}:change`,\n      activeNavItem: `${this.tag}:active-navItem`\n    };\n  }\n\n  static get PfeType() {\n    return PFElement.PfeTypes.Content;\n  }\n\n  constructor() {\n    super(PfeJumpLinksPanel, { type: PfeJumpLinksPanel.PfeType });\n    this._init = this._init.bind(this);\n    this._slot = this.shadowRoot.querySelector(\"slot\");\n    this._slot.addEventListener(\"slotchange\", this._init);\n    this._scrollCallback = this._scrollCallback.bind(this);\n    this._mutationCallback = this._mutationCallback.bind(this);\n    this._observer = new MutationObserver(this._mutationCallback);\n    this.currentActive = null;\n    this.sectionMargin = this.getAttribute(\"offset\") || 200;\n    this.currentActive = 0;\n    this.current = -1;\n    this.nav = this._getNav();\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this._init();\n\n    if (this.nav && this.nav.hasAttribute(\"autobuild\")) {\n      this.nav._rebuildNav();\n    }\n\n    this._observer.observe(this, pfeJumpLinksPanelObserverConfig);\n  }\n\n  disconnectedCallback() {\n    this._observer.disconnect();\n    window.removeEventListener(\"scroll\");\n    this._slot.removeEventListener(\"slotchange\", this._init);\n  }\n\n  _init() {\n    window.addEventListener(\"scroll\", this._scrollCallback);\n    this.scrollTarget = this.getAttribute(\"scrolltarget\");\n    this.JumpLinksNav = document.querySelector(`#${this.scrollTarget}`);\n    this.sections = this.querySelectorAll(\".pfe-jump-links-panel__section\");\n\n    if (this.JumpLinksNav) {\n      this.menu_links = this.JumpLinksNav.querySelectorAll(\"a\");\n    }\n  }\n\n  _getNav() {\n    return document.querySelector(\n      `pfe-jump-links-nav#${this.getAttribute(\"scrolltarget\")}`\n    );\n  }\n\n  _makeActive(link) {\n    if (this.menu_links[link]) {\n      // Check if this is a subnav or has subsections\n      if (this.menu_links[link].classList.contains(\"sub-section\")) {\n        this.menu_links[link].setAttribute(\"active\", \"\");\n        this.menu_links[link].parentNode.parentNode.parentNode.setAttribute(\n          \"active\",\n          \"\"\n        );\n        this.menu_links[link].parentNode.parentNode.parentNode.classList.add(\n          \"expand\"\n        );\n      } else if (this.menu_links[link].classList.contains(\"has-sub-section\")) {\n        this.menu_links[link].setAttribute(\"active\", \"\");\n        this.menu_links[link].parentNode.setAttribute(\"active\", \"\");\n        this.menu_links[link].parentNode.classList.add(\"expand\");\n      } else {\n        this.menu_links[link].setAttribute(\"active\", \"\");\n        this.menu_links[link].parentNode.setAttribute(\"active\", \"\");\n      }\n\n      let activeLink = this.JumpLinksNav.querySelector(\"[active]\");\n      this.emitEvent(PfeJumpLinksPanel.events.activeNavItem, {\n        detail: {\n          activeNavItem: activeLink\n        }\n      });\n    }\n  }\n\n  _removeActive(link) {\n    if (this.menu_links[link]) {\n      if (this.menu_links[link].classList.contains(\"sub-section\")) {\n        this.menu_links[link].parentNode.parentNode.parentNode.classList.remove(\n          \"expand\"\n        );\n      }\n      this.menu_links[link].removeAttribute(\"active\");\n      this.menu_links[link].parentNode.removeAttribute(\"active\");\n    }\n  }\n\n  _removeAllActive() {\n    if (!Object.keys) {\n      Object.keys = function(obj) {\n        if (obj !== Object(obj))\n          throw new TypeError(\"Object.keys called on a non-object\");\n        var k = [],\n          p;\n        for (p in obj)\n          if (Object.prototype.hasOwnProperty.call(obj, p)) k.push(p);\n        return k;\n      };\n      Object.keys.forEach = Array.forEach;\n    }\n    [...Array(this.sections.length).keys()].forEach(link => {\n      this._removeActive(link);\n    });\n  }\n\n  _mutationCallback() {\n    if (window.ShadyCSS) {\n      this._observer.disconnect();\n    }\n\n    //If we didn't get nav in the constructor, grab it now\n    if (!this.nav) {\n      this.nav = document.querySelector(\n        `pfe-jump-links-nav#${this.getAttribute(\"scrolltarget\")}`\n      );\n    }\n    //If we want the nav to be built automatically, re-init panel and rebuild nav\n    if (this.nav.hasAttribute(\"autobuild\")) {\n      this._init();\n      this.emitEvent(PfeJumpLinksPanel.events.change);\n      this.nav._rebuildNav();\n    }\n\n    if (window.ShadyCSS) {\n      this._observer.observe(this, pfeJumpLinksPanelObserverConfig);\n    }\n  }\n\n  _scrollCallback() {\n    let sections;\n    let menu_links;\n    let sectionMargin;\n    //Check sections to make sure we have them (if not, get them)\n    if (!this.sections || typeof this.sections === \"undefined\") {\n      this.sections = this.querySelectorAll(\".pfe-jump-links-panel__section\");\n    } else {\n      sections = this.sections;\n    }\n    //Check list of links to make sure we have them (if not, get them)\n    if (this.menu_links.length < 1 || !this.menu_links) {\n      this.menu_links = this.JumpLinksNav.shadowRoot.querySelectorAll(\"a\");\n      menu_links = this.menu_links;\n    }\n\n    if (!this.sectionMargin) {\n      sectionMargin = 200;\n    } else {\n      sectionMargin = this.sectionMargin;\n    }\n\n    // Make an array from the node list\n    const sectionArr = [...sections];\n    // Get all the sections that match this point in the scroll\n    const matches = sectionArr\n      .filter(section => window.scrollY >= section.offsetTop - sectionMargin)\n      .reverse();\n\n    //Identify the last one queried as the current section\n    const current = sectionArr.indexOf(matches[0]);\n\n    // If that section isn't already active,\n    // remove active from the other links and make it active\n    if (current !== this.currentActive) {\n      this._removeAllActive();\n      this.currentActive = current;\n      this._makeActive(current);\n    }\n  }\n}\n\nPFElement.create(PfeJumpLinks);\nPFElement.create(PfeJumpLinksNav);\nPFElement.create(PfeJumpLinksPanel);\n\nexport default PfeJumpLinks;\n"],"names":["pfeJumpLinksNavObserverConfig","childList","subtree","characterData","attributes","pfeJumpLinksPanelObserverConfig","PfeJumpLinks","PFElement","PfeTypes","Content","type","PfeType","PfeJumpLinksNav","hasAttribute","_buildNav","bind","_mutationCallback","_menuContainer","shadowRoot","querySelector","_observer","MutationObserver","_reportHeight","panel","document","id","_isValidLightDom","menu","classList","add","innerHTML","outerHTML","div","createElement","getAttribute","prepend","html","cloneNode","appendChild","observe","addEventListener","PfeJumpLinksPanel","events","change","disconnect","removeEventListener","buildLinkList","linkList","panelSections","querySelectorAll","i","length","arr","contains","linkListItem","linkSubItem","heading","window","ShadyCSS","children","console","warn","tag","has_slot","tagName","cssVarName","height","clientHeight","style","setProperty","activeNavItem","_init","_slot","_scrollCallback","currentActive","sectionMargin","current","nav","_getNav","_rebuildNav","scrollTarget","JumpLinksNav","sections","menu_links","link","setAttribute","parentNode","activeLink","emitEvent","detail","remove","removeAttribute","Object","keys","obj","TypeError","k","p","prototype","hasOwnProperty","call","push","forEach","Array","_removeActive","sectionArr","matches","filter","scrollY","section","offsetTop","reverse","indexOf","_removeAllActive","_makeActive","create"],"mappings":"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"}