import t from"../../pfelement/dist/pfelement.min.js";
/*!
 * PatternFly Elements: PfeJumpLinks 1.0.0-prerelease.39
 * @license
 * Copyright 2020 Red Hat, Inc.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
*/class e extends t{static get version(){return"1.0.0-prerelease.39"}get html(){return"<style>:host{display:block}:host([hidden]){display:none}\n/*# sourceMappingURL=pfe-jump-links.min.css.map */\n</style><slot></slot>"}static get properties(){return{}}static get slots(){return{default:{title:"Default slot",type:"array",namedSlot:!1,items:{oneOf:[{$ref:"raw"}]}}}}static get tag(){return"pfe-jump-links"}get schemaUrl(){return"pfe-jump-links.json"}get templateUrl(){return"pfe-jump-links.html"}get styleUrl(){return"pfe-jump-links.scss"}static get PfeType(){return t.PfeTypes.Content}constructor(){super(e,{type:e.PfeType})}connectedCallback(){super.connectedCallback()}disconnectedCallback(){}}class i extends t{static get version(){return"1.0.0-prerelease.39"}get html(){return`<style>:host{font-weight:400;display:block;position:-webkit-sticky;position:sticky;top:calc(16px * 4);top:calc(var(--pfe-theme--container-spacer,16px) * 4);padding:calc(16px * 2);padding:calc(var(--pfe-theme--container-spacer,16px) * 2);--pfe-jump-links--BackgroundColor:BackgroundColor}::slotted([slot=heading]){margin:0 0 1rem 0!important;margin-bottom:calc(16px * 1);margin-bottom:calc(var(--pfe-theme--container-spacer,16px) * 1);font-size:14px;font-weight:400;text-transform:uppercase}ul.pfe-jump-links-nav{padding:1rem 1rem 1rem 0;padding:1rem 1rem 1rem 0;margin:0;list-style:none}ul.sub-nav{margin:0;padding:0;overflow-y:hidden;-webkit-transition:-webkit-box-flex 1s linear,-webkit-flex 1s linear;transition:-webkit-box-flex 1s linear,-webkit-flex 1s linear;transition:flex 1s linear;transition:flex 1s linear,-webkit-box-flex 1s linear,-webkit-flex 1s linear,-ms-flex 1s linear;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:0;-webkit-flex:0;-ms-flex:0;flex:0}li{border-left:3px solid transparent;display:block;text-decoration:none}li.expand ul.sub-nav{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}li.expand a.sub-section{display:table;height:auto}a{display:table;text-decoration:none;font-size:16px;padding:8px;line-height:1.5;border-left:3px solid transparent;position:relative}a.sub-section{display:none;margin-left:12px;font-size:14px}a::after{content:"";position:absolute;width:calc(100% - 4px);height:calc(100% - 4px);top:0;left:0}a:focus{outline:0}a:focus::after{border-radius:3px;border:2px solid #62a1f4}:host([default]){border:1px solid #d2d2d2}:host([default]) ::slotted([slot=heading]){color:#151515}:host([default]) ul.pfe-jump-links-nav{border-left:1px solid #d2d2d2}:host([default]) li[active]{border-left:3px solid #06c}:host([default]) a{color:#72767b;position:relative}:host([default]) a:hover{color:#151515}:host([default]) a[active]{color:#151515}:host([default]) a::after{content:"";position:absolute;width:calc(100% - 4px);height:calc(100% - 4px);top:0;left:0}:host([default]) a:focus{outline:0}:host([default]) a:focus::after{border-radius:3px;border:2px solid #62a1f4}:host([dark]){background-color:#151515;border:1px solid #72767b}:host([dark]) ::slotted([slot=heading]){color:#ccc}:host([dark]) ul.pfe-jump-links-nav{border-left:1px solid #72767b}:host([dark]) li[active]{border-left:3px solid #e00}:host([dark]) a{color:#ccc}:host([dark]) a:hover{color:#999}:host([dark]) a[active]{color:#fff}:host([dark]) a::after{content:"";position:absolute;width:calc(100% - 4px);height:calc(100% - 4px);top:0;left:0}:host([dark]) a:focus{outline:0}:host([dark]) a:focus::after{border-radius:3px;border:2px solid #62a1f4}:host([hidden]){display:none}:host([horizontal]){padding:0;top:0;width:100%;background-color:#f0f0f0}:host([horizontal]) nav{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative}:host([horizontal]) nav ::slotted([slot=heading]){display:none}:host([horizontal]) nav ::slotted([slot=logo]){position:absolute;left:0;max-height:56px;max-width:224px;top:1rem;left:64px}:host([horizontal]) nav ::slotted([slot=link]){position:absolute;right:64px;top:1rem;background-color:red;padding:16px 32px;border-radius:3px;color:#fff!important}:host([horizontal]) .heading{display:none}:host([horizontal]) #container{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;justify-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}:host([horizontal]) ul{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:0;width:auto;margin-left:auto;margin-right:auto}:host([horizontal]) ul li{padding:0 24px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:80px;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;border-top:4px solid transparent;border-bottom:4px solid transparent;border-left:none;border-right:none}:host([horizontal]) ul li[active]{border-top:4px solid #e00}:host([horizontal]) a{color:#72767b}:host([horizontal]) a[active]{color:#151515}\n/*# sourceMappingURL=pfe-jump-links-nav.min.css.map */\n</style><nav>\n  <h2 class="sr-only" hidden>Page navigation</h2>\n  ${this.has_slot("heading")?'<slot class="heading" name="heading" id="heading"></slot>':'<h4 class="heading" id="heading">Jump to section</h4>'}\n  ${this.has_slot("logo")?'<slot class="logo" name="logo" id="logo"></slot>':""}\n\n  <div id="container"></div>\n  ${this.has_slot("link")?'<slot class="link" name="link" id="link"></slot>':""}\n</nav>`}static get tag(){return"pfe-jump-links-nav"}get schemaUrl(){return"pfe-jump-links-nav.json"}get templateUrl(){return"pfe-jump-links-nav.html"}get styleUrl(){return"pfe-jump-links-nav.scss"}static get PfeType(){return t.PfeTypes.Content}constructor(){super(i,{type:i.PfeType}),this._buildNav=this._buildNav.bind(this),this._mutationCallback=this._mutationCallback.bind(this),this._menuContainer=this.shadowRoot.querySelector("#container"),this._observer=new MutationObserver(this._mutationCallback)}connectedCallback(){if(super.connectedCallback(),this.hasAttribute("autobuild"))this._buildNav();else if(this._isValidLightDom()){const t=this.querySelector("ul");this._menuContainer.innerHTML=t.outerHTML}this._observer.observe(this,{childList:!0,subtree:!0,characterData:!0,attributes:!0}),this.panel=document.querySelector(`[scrolltarget="${this.id}"]`),this.panel.addEventListener(s.events.change,this._buildNav)}disconnectedCallback(){this.removeEventListener("click"),this.removeEventListener(s.events.change,_eventCallback)}_rebuildNav(){this._buildNav()}_buildNav(){let t=`\n      <ul class="pfe-jump-links-nav">\n        ${(()=>{let t="";this.panel||(this.panel=document.querySelector(`[scrolltarget="${this.id}"]`));let e=this.panel.querySelectorAll(".pfe-jump-links-panel__section");for(let i=0;i<e.length;i++){let s=[...e];if(s[i].classList.contains("has-sub-section"))t+=`\n          <li>\n            <a\n              class="pfe-jump-links-nav__item has-sub-section"\n              href="#${s[i].id}"\n              data-target="${s[i].id}">\n                ${s[i].innerHTML}\n            </a>\n            <ul class="sub-nav">\n        `;else if(s[i].classList.contains("sub-section")){let e=`\n        <li>\n            <a\n              class="pfe-jump-links-nav__item sub-section"\n              href="#${s[i].id}"\n              data-target="${s[i].id}">\n                ${s[i].innerHTML}\n            </a>\n        </li>`;s[i+1].classList.contains("sub-section")||(e+="</ul></li>"),t+=e}else t+=`\n          <li>\n            <a\n              class="pfe-jump-links-nav__item"\n              href="#${s[i].id}"\n              data-target="${s[i].id}">\n                ${s[i].innerHTML}\n            </a>\n          </li>\n        `}return t})()}\n    `;this.shadowRoot.querySelector("#container").innerHTML=t}_mutationCallback(){if(!this.hasAttribute("autobuild")){const t=this.querySelector("ul");this._menuContainer.innerHTML=t.outerHTML}}_isValidLightDom(){return this.children.length?"UL"===this.children[1].tagName||(console.warn(`${e.tag}: The top-level list of links MUST be a <ul>`),!1):(console.warn(`${e.tag}: You must have a <ul> tag in the light DOM`),!1)}}class s extends t{static get version(){return"1.0.0-prerelease.39"}get html(){return"<style>\n/*# sourceMappingURL=pfe-jump-links-panel.min.css.map */\n</style><slot></slot>"}static get tag(){return"pfe-jump-links-panel"}get schemaUrl(){return"pfe-jump-links-panel.json"}get templateUrl(){return"pfe-jump-links-panel.html"}get styleUrl(){return"pfe-jump-links-panel.scss"}static get events(){return{change:`${this.tag}:change`,activeNavItem:`${this.tag}:active-navItem`}}static get PfeType(){return t.PfeTypes.Content}constructor(){super(s,{type:s.PfeType}),this._init=this._init.bind(this),this._slot=this.shadowRoot.querySelector("slot"),this._slot.addEventListener("slotchange",this._init),this._scrollCallback=this._scrollCallback.bind(this),this._mutationCallback=this._mutationCallback.bind(this),this._observer=new MutationObserver(this._mutationCallback),this.currentActive=null,this.sectionMargin=this.getAttribute("offset")||200,this.currentActive=0,this.current=-1,this.nav=this._getNav()}connectedCallback(){super.connectedCallback(),this._init(),this.nav._rebuildNav(),this._observer.observe(this,{childList:!0,subtree:!0,characterData:!0,attributes:!0})}disconnectedCallback(){window.removeEventListener("scroll"),this._slot.removeEventListener("slotchange",this._init)}_init(){window.addEventListener("scroll",this._scrollCallback),this.scrollTarget=this.getAttribute("scrolltarget"),this.JumpLinksNav=document.querySelector(`#${this.scrollTarget}`),this.sections=this.querySelectorAll(".pfe-jump-links-panel__section"),this.JumpLinksNav&&(this.menu_links=this.JumpLinksNav.querySelectorAll(".pfe-jump-links-nav__item"))}_getNav(){return document.querySelector(`pfe-jump-links-nav#${this.getAttribute("scrolltarget")}`)}_makeActive(t){if(this.menu_links[t]){this.menu_links[t].classList.contains("sub-section")?(this.menu_links[t].setAttribute("active",""),this.menu_links[t].parentNode.parentNode.parentNode.setAttribute("active",""),this.menu_links[t].parentNode.parentNode.parentNode.classList.add("expand")):this.menu_links[t].classList.contains("has-sub-section")?(this.menu_links[t].setAttribute("active",""),this.menu_links[t].parentNode.setAttribute("active",""),this.menu_links[t].parentNode.classList.add("expand")):(this.menu_links[t].setAttribute("active",""),this.menu_links[t].parentNode.setAttribute("active",""));let e=this.JumpLinksNav.querySelector("[active]");this.emitEvent(s.events.activeNavItem,{detail:{activeNavItem:e}})}}_removeActive(t){this.menu_links[t]&&(this.menu_links[t].classList.contains("sub-section")&&this.menu_links[t].parentNode.parentNode.parentNode.classList.remove("expand"),this.menu_links[t].removeAttribute("active"),this.menu_links[t].parentNode.removeAttribute("active"))}_removeAllActive(){[...Array(this.sections.length).keys()].forEach(t=>{this._removeActive(t)})}_mutationCallback(){this.nav||(this.nav=document.querySelector(`pfe-jump-links-nav#${this.getAttribute("scrolltarget")}`)),this.nav.hasAttribute("autobuild")&&(this._init(),this.emitEvent(s.events.change),this.nav._rebuildNav())}_scrollCallback(){let t,e,i;this.sections&&void 0!==this.sections?t=this.sections:this.sections=this.querySelectorAll(".pfe-jump-links-panel__section"),(this.menu_links.length<1||!this.menu_links)&&(this.menu_links=this.JumpLinksNav.shadowRoot.querySelectorAll(".pfe-jump-links-nav__item"),e=this.menu_links),i=this.sectionMargin?this.sectionMargin:200;const s=[...t],n=s.filter(t=>window.scrollY>=t.offsetTop-i).reverse(),l=s.indexOf(n[0]);l!==this.currentActive&&(this._removeAllActive(),this.currentActive=l,this._makeActive(l))}}t.create(e),t.create(i),t.create(s);export default e;
//# sourceMappingURL=pfe-jump-links.min.js.map
