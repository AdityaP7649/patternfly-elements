!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("../../pfelement/dist/pfelement.umd")):"function"==typeof define&&define.amd?define(["../../pfelement/dist/pfelement.umd"],t):e.PfeJumpLinks=t(e.PFElement)}(this,function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:l(o,t,n)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(n):void 0}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var r={childList:!0,subtree:!0,characterData:!0,attributes:!0},c={childList:!0,subtree:!0,characterData:!0,attributes:!0},u=(o(p,e),n(p,[{key:"html",get:function(){return"<style>:host{display:block}:host([hidden]){display:none}\n/*# sourceMappingURL=pfe-jump-links.min.css.map */\n</style><slot></slot>"}},{key:"schemaUrl",get:function(){return"pfe-jump-links.json"}},{key:"templateUrl",get:function(){return"pfe-jump-links.html"}},{key:"styleUrl",get:function(){return"pfe-jump-links.scss"}}],[{key:"version",get:function(){return"1.0.0-prerelease.39"}},{key:"properties",get:function(){return{}}},{key:"slots",get:function(){return{default:{title:"Default slot",type:"array",namedSlot:!1,items:{oneOf:[{$ref:"raw"}]}}}}},{key:"tag",get:function(){return"pfe-jump-links"}},{key:"PfeType",get:function(){return e.PfeTypes.Content}}]),p);function p(){return t(this,p),s(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,p,{type:p.PfeType}))}var d=(o(h,e),n(h,[{key:"html",get:function(){return'<style>:host{font-weight:400;display:block;position:-webkit-sticky;position:sticky;top:calc(16px * 4);top:calc(var(--pfe-theme--container-spacer,16px) * 4);padding:calc(16px * 2);padding:calc(var(--pfe-theme--container-spacer,16px) * 2);--pfe-jump-links--BackgroundColor:BackgroundColor}::slotted([slot=heading]){margin:0 0 1rem 0!important;margin-bottom:calc(16px * 1);margin-bottom:calc(var(--pfe-theme--container-spacer,16px) * 1);font-size:14px;font-weight:400;text-transform:uppercase}ul.pfe-jump-links-nav{padding:1rem 1rem 1rem 0;padding:1rem 1rem 1rem 0;margin:0;list-style:none}ul.sub-nav{margin:0;padding:0;overflow-y:hidden;-webkit-transition:-webkit-box-flex 1s linear,-webkit-flex 1s linear;transition:-webkit-box-flex 1s linear,-webkit-flex 1s linear;transition:flex 1s linear;transition:flex 1s linear,-webkit-box-flex 1s linear,-webkit-flex 1s linear,-ms-flex 1s linear;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:0;-webkit-flex:0;-ms-flex:0;flex:0}li{border-left:3px solid transparent;display:block;text-decoration:none}li.expand ul.sub-nav{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}li.expand a.sub-section{display:table;height:auto}a{display:table;text-decoration:none;font-size:16px;padding:8px;line-height:1.5;border-left:3px solid transparent;position:relative}a.sub-section{display:none;margin-left:12px;font-size:14px}a::after{content:"";position:absolute;width:calc(100% - 4px);height:calc(100% - 4px);top:0;left:0}a:focus{outline:0}a:focus::after{border-radius:3px;border:2px solid #62a1f4}:host([default]){border:1px solid #d2d2d2}:host([default]) ::slotted([slot=heading]){color:#151515}:host([default]) ul.pfe-jump-links-nav{border-left:1px solid #d2d2d2}:host([default]) li[active]{border-left:3px solid #06c}:host([default]) a{color:#72767b;position:relative}:host([default]) a:hover{color:#151515}:host([default]) a[active]{color:#151515}:host([default]) a::after{content:"";position:absolute;width:calc(100% - 4px);height:calc(100% - 4px);top:0;left:0}:host([default]) a:focus{outline:0}:host([default]) a:focus::after{border-radius:3px;border:2px solid #62a1f4}:host([pfe-color=darkest]){background-color:#151515;border:1px solid #72767b}:host([pfe-color=darkest]) ::slotted([slot=heading]){color:#ccc}:host([pfe-color=darkest]) ul.pfe-jump-links-nav{border-left:1px solid #72767b}:host([pfe-color=darkest]) li[active]{border-left:3px solid #e00}:host([pfe-color=darkest]) a{color:#ccc}:host([pfe-color=darkest]) a:hover{color:#999}:host([pfe-color=darkest]) a[active]{color:#fff}:host([pfe-color=darkest]) a::after{content:"";position:absolute;width:calc(100% - 4px);height:calc(100% - 4px);top:0;left:0}:host([pfe-color=darkest]) a:focus{outline:0}:host([pfe-color=darkest]) a:focus::after{border-radius:3px;border:2px solid #62a1f4}:host([hidden]){display:none}:host([horizontal]){padding:0;top:0;width:100%}:host([horizontal]) nav{background-color:#f0f0f0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative}:host([horizontal]) nav ::slotted([slot=heading]){display:none}:host([horizontal]) nav ::slotted([slot=logo]){position:absolute;left:0;max-height:56px;max-width:224px;top:1rem;left:64px}:host([horizontal]) nav ::slotted([slot=link]){position:absolute;right:64px;top:1rem;background-color:red;padding:16px 32px;border-radius:3px;color:#fff!important}:host([horizontal]) .heading{display:none}:host([horizontal]) #container{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;justify-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}:host([horizontal]) ul{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:0;width:auto;margin-left:auto;margin-right:auto}:host([horizontal]) ul li{padding:0 24px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:80px;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;border-top:4px solid transparent;border-bottom:4px solid transparent;border-left:none;border-right:none}:host([horizontal]) ul li[active]{border-top:4px solid #e00}:host([horizontal]) a{color:#72767b}:host([horizontal]) a[active]{color:#151515}@media (max-width:768px){:host([horizontal]) nav{min-height:88px;background-color:#f0f0f0}:host([horizontal]) .pfe-jump-links-nav{display:none}}\n/*# sourceMappingURL=pfe-jump-links-nav.min.css.map */\n</style><nav>\n  <h2 class="sr-only" hidden>Page navigation</h2>\n  '+(this.has_slot("heading")?'<slot class="heading" name="heading" id="heading"></slot>':'<h4 class="heading" id="heading">Jump to section</h4>')+"\n  "+(this.has_slot("logo")?'<slot class="logo" name="logo" id="logo"></slot>':"")+'\n\n  <div id="container"></div>\n  '+(this.has_slot("link")?'<slot class="link" name="link" id="link"></slot>':"")+"\n</nav>"}},{key:"schemaUrl",get:function(){return"pfe-jump-links-nav.json"}},{key:"templateUrl",get:function(){return"pfe-jump-links-nav.html"}},{key:"styleUrl",get:function(){return"pfe-jump-links-nav.scss"}}],[{key:"version",get:function(){return"1.0.0-prerelease.39"}},{key:"tag",get:function(){return"pfe-jump-links-nav"}},{key:"PfeType",get:function(){return e.PfeTypes.Content}}]),n(h,[{key:"connectedCallback",value:function(){if(l(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"connectedCallback",this).call(this),this.hasAttribute("autobuild"))this._buildNav();else if(this._isValidLightDom()){var e=this.querySelector("ul");this._menuContainer.innerHTML=e.outerHTML}this._observer.observe(this,r),this.panel=document.querySelector('[scrolltarget="'+this.id+'"]'),this.panel.addEventListener(f.events.change,this._buildNav)}},{key:"disconnectedCallback",value:function(){this._observer.disconnect(),this.panel.removeEventListener(f.events.change,this._buildNav),this.removeEventListener("click")}},{key:"_rebuildNav",value:function(){this._buildNav()}},{key:"_buildNav",value:function(){var s=this,e='\n      <ul class="pfe-jump-links-nav">\n        '+function(){var e="";s.panel||(s.panel=document.querySelector('[scrolltarget="'+s.id+'"]'));for(var t=s.panel.querySelectorAll(".pfe-jump-links-panel__section"),n=0;n<t.length;n++){var i=[].concat(a(t));if(i[n].classList.contains("has-sub-section"))e+='\n          <li>\n            <a\n              class="pfe-jump-links-nav__item has-sub-section"\n              href="#'+i[n].id+'"\n              data-target="'+i[n].id+'">\n                '+i[n].innerHTML+'\n            </a>\n            <ul class="sub-nav">\n        ';else if(i[n].classList.contains("sub-section")){var o='\n        <li>\n            <a\n              class="pfe-jump-links-nav__item sub-section"\n              href="#'+i[n].id+'"\n              data-target="'+i[n].id+'">\n                '+i[n].innerHTML+"\n            </a>\n        </li>";i[n+1].classList.contains("sub-section")||(o+="</ul></li>"),e+=o}else e+='\n          <li>\n            <a\n              class="pfe-jump-links-nav__item"\n              href="#'+i[n].id+'"\n              data-target="'+i[n].id+'">\n                '+i[n].innerHTML+"\n            </a>\n          </li>\n        "}return e}()+"\n    ";this.shadowRoot.querySelector("#container").innerHTML=e}},{key:"_mutationCallback",value:function(){if(window.ShadyCSS&&this._observer.disconnect(),this.hasAttribute("autobuild"))this.hasAttribute("autobuild")&&this._buildNav();else{var e=this.querySelector("ul");this._menuContainer.innerHTML=e.outerHTML}window.ShadyCSS&&this._observer.observe(this,r)}},{key:"_isValidLightDom",value:function(){return this.children.length?"UL"===this.children[1].tagName||(console.warn(u.tag+": The top-level list of links MUST be a <ul>"),!1):(console.warn(u.tag+": You must have a <ul> tag in the light DOM"),!1)}}]),h);function h(){t(this,h);var e=s(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,h,{type:h.PfeType}));return e._buildNav=e._buildNav.bind(e),e._mutationCallback=e._mutationCallback.bind(e),e._menuContainer=e.shadowRoot.querySelector("#container"),e._observer=new MutationObserver(e._mutationCallback),e}var f=(o(b,e),n(b,[{key:"html",get:function(){return"<style>\n/*# sourceMappingURL=pfe-jump-links-panel.min.css.map */\n</style><slot></slot>"}},{key:"schemaUrl",get:function(){return"pfe-jump-links-panel.json"}},{key:"templateUrl",get:function(){return"pfe-jump-links-panel.html"}},{key:"styleUrl",get:function(){return"pfe-jump-links-panel.scss"}}],[{key:"version",get:function(){return"1.0.0-prerelease.39"}},{key:"tag",get:function(){return"pfe-jump-links-panel"}},{key:"events",get:function(){return{change:this.tag+":change",activeNavItem:this.tag+":active-navItem"}}},{key:"PfeType",get:function(){return e.PfeTypes.Content}}]),n(b,[{key:"connectedCallback",value:function(){l(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"connectedCallback",this).call(this),this._init(),this.nav&&this.nav.hasAttribute("autobuild")&&this.nav._rebuildNav(),this._observer.observe(this,c)}},{key:"disconnectedCallback",value:function(){this._observer.disconnect(),window.removeEventListener("scroll"),this._slot.removeEventListener("slotchange",this._init)}},{key:"_init",value:function(){window.addEventListener("scroll",this._scrollCallback),this.scrollTarget=this.getAttribute("scrolltarget"),this.JumpLinksNav=document.querySelector("#"+this.scrollTarget),this.sections=this.querySelectorAll(".pfe-jump-links-panel__section"),this.JumpLinksNav&&(this.menu_links=this.JumpLinksNav.querySelectorAll(".pfe-jump-links-nav__item"))}},{key:"_getNav",value:function(){return document.querySelector("pfe-jump-links-nav#"+this.getAttribute("scrolltarget"))}},{key:"_makeActive",value:function(e){if(this.menu_links[e]){this.menu_links[e].classList.contains("sub-section")?(this.menu_links[e].setAttribute("active",""),this.menu_links[e].parentNode.parentNode.parentNode.setAttribute("active",""),this.menu_links[e].parentNode.parentNode.parentNode.classList.add("expand")):this.menu_links[e].classList.contains("has-sub-section")?(this.menu_links[e].setAttribute("active",""),this.menu_links[e].parentNode.setAttribute("active",""),this.menu_links[e].parentNode.classList.add("expand")):(this.menu_links[e].setAttribute("active",""),this.menu_links[e].parentNode.setAttribute("active",""));var t=this.JumpLinksNav.querySelector("[active]");this.emitEvent(b.events.activeNavItem,{detail:{activeNavItem:t}})}}},{key:"_removeActive",value:function(e){this.menu_links[e]&&(this.menu_links[e].classList.contains("sub-section")&&this.menu_links[e].parentNode.parentNode.parentNode.classList.remove("expand"),this.menu_links[e].removeAttribute("active"),this.menu_links[e].parentNode.removeAttribute("active"))}},{key:"_removeAllActive",value:function(){Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on a non-object");var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n},Object.keys.forEach=Array.forEach)}},{key:"_mutationCallback",value:function(){window.ShadyCSS&&this._observer.disconnect(),this.nav||(this.nav=document.querySelector("pfe-jump-links-nav#"+this.getAttribute("scrolltarget"))),this.nav.hasAttribute("autobuild")&&(this._init(),this.emitEvent(b.events.change),this.nav._rebuildNav()),window.ShadyCSS&&this._observer.observe(this,c)}},{key:"_scrollCallback",value:function(){var e=void 0,t=void 0;this.sections&&void 0!==this.sections?e=this.sections:this.sections=this.querySelectorAll(".pfe-jump-links-panel__section"),(this.menu_links.length<1||!this.menu_links)&&(this.menu_links=this.JumpLinksNav.shadowRoot.querySelectorAll(".pfe-jump-links-nav__item"),this.menu_links),t=this.sectionMargin?this.sectionMargin:200;var n=[].concat(a(e)),i=n.filter(function(e){return window.scrollY>=e.offsetTop-t}).reverse(),o=n.indexOf(i[0]);o!==this.currentActive&&(this._removeAllActive(),this.currentActive=o,this._makeActive(o))}}]),b);function b(){t(this,b);var e=s(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,b,{type:b.PfeType}));return e._init=e._init.bind(e),e._slot=e.shadowRoot.querySelector("slot"),e._slot.addEventListener("slotchange",e._init),e._scrollCallback=e._scrollCallback.bind(e),e._mutationCallback=e._mutationCallback.bind(e),e._observer=new MutationObserver(e._mutationCallback),e.currentActive=null,e.sectionMargin=e.getAttribute("offset")||200,e.currentActive=0,e.current=-1,e.nav=e._getNav(),e}return e.create(u),e.create(d),e.create(f),u});
//# sourceMappingURL=pfe-jump-links.umd.min.js.map
