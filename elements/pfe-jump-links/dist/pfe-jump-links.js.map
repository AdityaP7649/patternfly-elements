{"version":3,"file":"pfe-jump-links.js","sources":["../_temp/pfe-jump-links.js"],"sourcesContent":["/*!\n * PatternFly Elements: PfeJumpLinks 1.0.0-prerelease.39\n * @license\n * Copyright 2020 Red Hat, Inc.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * \n*/\n\nimport PFElement from \"../../pfelement/dist/pfelement.js\";\n\nconst pfeJumpLinksNavObserverConfig = {\n  childList: true,\n  subtree: true,\n  characterData: true,\n  attributes: true\n};\n\nconst pfeJumpLinksPanelObserverConfig = {\n  childList: true,\n  subtree: true,\n  characterData: true,\n  attributes: true\n};\n\nclass PfeJumpLinks extends PFElement {\n  static get version() {\n    return \"1.0.0-prerelease.39\";\n  }\n\n  get html() {\n    return `<style>:host{display:block}:host([hidden]){display:none}\n/*# sourceMappingURL=pfe-jump-links.min.css.map */\n</style><slot></slot>`;\n  }\n\n  static get properties() {\n    return {};\n  }\n\n  static get slots() {\n    return {\"default\":{\"title\":\"Default slot\",\"type\":\"array\",\"namedSlot\":false,\"items\":{\"oneOf\":[{\"$ref\":\"raw\"}]}}};\n  }\n  static get tag() {\n    return \"pfe-jump-links\";\n  }\n\n  get schemaUrl() {\n    return \"pfe-jump-links.json\";\n  }\n\n  get templateUrl() {\n    return \"pfe-jump-links.html\";\n  }\n\n  get styleUrl() {\n    return \"pfe-jump-links.scss\";\n  }\n\n  static get PfeType() {\n    return PFElement.PfeTypes.Content;\n  }\n\n  constructor() {\n    super(PfeJumpLinks, { type: PfeJumpLinks.PfeType });\n  }\n}\n\nclass PfeJumpLinksNav extends PFElement {\n  static get version() {\n    return \"1.0.0-prerelease.39\";\n  }\n\n  get html() {\n    return `<style>:host{font-weight:400;display:block;position:-webkit-sticky;position:sticky;top:calc(16px * 4);top:calc(var(--pfe-theme--container-spacer,16px) * 4);padding:calc(16px * 2);padding:calc(var(--pfe-theme--container-spacer,16px) * 2);--pfe-jump-links--BackgroundColor:BackgroundColor}::slotted([slot=heading]){margin:0 0 1rem 0!important;margin-bottom:calc(16px * 1);margin-bottom:calc(var(--pfe-theme--container-spacer,16px) * 1);font-size:14px;font-weight:400;text-transform:uppercase}ul.pfe-jump-links-nav{padding:1rem 1rem 1rem 0;padding:1rem 1rem 1rem 0;margin:0;list-style:none}ul.sub-nav{margin:0;padding:0;overflow-y:hidden;-webkit-transition:-webkit-box-flex 1s linear,-webkit-flex 1s linear;transition:-webkit-box-flex 1s linear,-webkit-flex 1s linear;transition:flex 1s linear;transition:flex 1s linear,-webkit-box-flex 1s linear,-webkit-flex 1s linear,-ms-flex 1s linear;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:0;-webkit-flex:0;-ms-flex:0;flex:0}li{border-left:3px solid transparent;display:block;text-decoration:none}li.expand ul.sub-nav{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}li.expand a.sub-section{display:table;height:auto}a{display:table;text-decoration:none;font-size:16px;padding:8px;line-height:1.5;border-left:3px solid transparent;position:relative}a.sub-section{display:none;margin-left:12px;font-size:14px}a::after{content:\"\";position:absolute;width:calc(100% - 4px);height:calc(100% - 4px);top:0;left:0}a:focus{outline:0}a:focus::after{border-radius:3px;border:2px solid #62a1f4}:host([default]){border:1px solid #d2d2d2}:host([default]) ::slotted([slot=heading]){color:#151515}:host([default]) ul.pfe-jump-links-nav{border-left:1px solid #d2d2d2}:host([default]) li[active]{border-left:3px solid #06c}:host([default]) a{color:#72767b;position:relative}:host([default]) a:hover{color:#151515}:host([default]) a[active]{color:#151515}:host([default]) a::after{content:\"\";position:absolute;width:calc(100% - 4px);height:calc(100% - 4px);top:0;left:0}:host([default]) a:focus{outline:0}:host([default]) a:focus::after{border-radius:3px;border:2px solid #62a1f4}:host([pfe-color=darkest]){background-color:#151515;border:1px solid #72767b}:host([pfe-color=darkest]) ::slotted([slot=heading]){color:#ccc}:host([pfe-color=darkest]) ul.pfe-jump-links-nav{border-left:1px solid #72767b}:host([pfe-color=darkest]) li[active]{border-left:3px solid #e00}:host([pfe-color=darkest]) a{color:#ccc}:host([pfe-color=darkest]) a:hover{color:#999}:host([pfe-color=darkest]) a[active]{color:#fff}:host([pfe-color=darkest]) a::after{content:\"\";position:absolute;width:calc(100% - 4px);height:calc(100% - 4px);top:0;left:0}:host([pfe-color=darkest]) a:focus{outline:0}:host([pfe-color=darkest]) a:focus::after{border-radius:3px;border:2px solid #62a1f4}:host([hidden]){display:none}:host([horizontal]){padding:0;top:0;width:100%}:host([horizontal]) nav{background-color:#f0f0f0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative}:host([horizontal]) nav ::slotted([slot=heading]){display:none}:host([horizontal]) nav ::slotted([slot=logo]){position:absolute;left:0;max-height:56px;max-width:224px;top:1rem;left:64px}:host([horizontal]) nav ::slotted([slot=link]){position:absolute;right:64px;top:1rem;background-color:red;padding:16px 32px;border-radius:3px;color:#fff!important}:host([horizontal]) .heading{display:none}:host([horizontal]) #container{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;justify-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}:host([horizontal]) ul{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:0;width:auto;margin-left:auto;margin-right:auto}:host([horizontal]) ul li{padding:0 24px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:80px;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;border-top:4px solid transparent;border-bottom:4px solid transparent;border-left:none;border-right:none}:host([horizontal]) ul li[active]{border-top:4px solid #e00}:host([horizontal]) a{color:#72767b}:host([horizontal]) a[active]{color:#151515}@media (max-width:768px){:host([horizontal]) nav{min-height:88px;background-color:#f0f0f0}:host([horizontal]) .pfe-jump-links-nav{display:none}}\n/*# sourceMappingURL=pfe-jump-links-nav.min.css.map */\n</style><nav>\n  <h2 class=\"sr-only\" hidden>Page navigation</h2>\n  ${ this.has_slot(\"heading\") ?\n  `<slot class=\"heading\" name=\"heading\" id=\"heading\"></slot>`\n  : `<h4 class=\"heading\" id=\"heading\">Jump to section</h4>`\n  }\n  ${ this.has_slot(\"logo\") ?\n  `<slot class=\"logo\" name=\"logo\" id=\"logo\"></slot>`\n  : ``\n  }\n\n  <div id=\"container\"></div>\n  ${ this.has_slot(\"link\") ?\n  `<slot class=\"link\" name=\"link\" id=\"link\"></slot>`\n  : ``\n  }\n</nav>`;\n  }\n  static get tag() {\n    return \"pfe-jump-links-nav\";\n  }\n\n  get schemaUrl() {\n    return \"pfe-jump-links-nav.json\";\n  }\n\n  get templateUrl() {\n    return \"pfe-jump-links-nav.html\";\n  }\n\n  get styleUrl() {\n    return \"pfe-jump-links-nav.scss\";\n  }\n\n  static get PfeType() {\n    return PFElement.PfeTypes.Content;\n  }\n\n  constructor() {\n    super(PfeJumpLinksNav, { type: PfeJumpLinksNav.PfeType });\n\n    this._buildNav = this._buildNav.bind(this);\n    this._mutationCallback = this._mutationCallback.bind(this);\n    this._menuContainer = this.shadowRoot.querySelector(\"#container\");\n    this._observer = new MutationObserver(this._mutationCallback);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    //Check that the light DOM is there\n    if (this.hasAttribute(\"autobuild\")) {\n      this._buildNav();\n    } else {\n      //Check that the light DOM is valid\n      if (this._isValidLightDom()) {\n        const menu = this.querySelector(\"ul\");\n        this._menuContainer.innerHTML = menu.outerHTML;\n      }\n    }\n\n    this._observer.observe(this, pfeJumpLinksNavObserverConfig);\n\n    this.panel = document.querySelector(`[scrolltarget=\"${this.id}\"]`);\n\n    this.panel.addEventListener(\n      PfeJumpLinksPanel.events.change,\n      this._buildNav\n    );\n  }\n\n  disconnectedCallback() {\n    this._observer.disconnect();\n    this.panel.removeEventListener(\n      PfeJumpLinksPanel.events.change,\n      this._buildNav\n    );\n    this.removeEventListener(\"click\");\n  }\n\n  _rebuildNav() {\n    this._buildNav();\n  }\n\n  _buildNav() {\n    const buildLinkList = () => {\n      let linkList = ``;\n      if (!this.panel) {\n        this.panel = document.querySelector(`[scrolltarget=\"${this.id}\"]`);\n      }\n      let panelSections = this.panel.querySelectorAll(\n        \".pfe-jump-links-panel__section\"\n      );\n\n      for (let i = 0; i < panelSections.length; i++) {\n        let arr = [...panelSections];\n        if (arr[i].classList.contains(\"has-sub-section\")) {\n          let linkListItem = `\n          <li>\n            <a\n              class=\"pfe-jump-links-nav__item has-sub-section\"\n              href=\"#${arr[i].id}\"\n              data-target=\"${arr[i].id}\">\n                ${arr[i].innerHTML}\n            </a>\n            <ul class=\"sub-nav\">\n        `;\n          linkList += linkListItem;\n        } else if (arr[i].classList.contains(\"sub-section\")) {\n          let linkSubItem = `\n        <li>\n            <a\n              class=\"pfe-jump-links-nav__item sub-section\"\n              href=\"#${arr[i].id}\"\n              data-target=\"${arr[i].id}\">\n                ${arr[i].innerHTML}\n            </a>\n        </li>`;\n          if (!arr[i + 1].classList.contains(\"sub-section\")) {\n            linkSubItem += `</ul></li>`;\n          }\n          linkList += linkSubItem;\n        } else {\n          let linkListItem = `\n          <li>\n            <a\n              class=\"pfe-jump-links-nav__item\"\n              href=\"#${arr[i].id}\"\n              data-target=\"${arr[i].id}\">\n                ${arr[i].innerHTML}\n            </a>\n          </li>\n        `;\n          linkList += linkListItem;\n        }\n      }\n      return linkList;\n    };\n\n    let html = `\n      <ul class=\"pfe-jump-links-nav\">\n        ${buildLinkList()}\n    `;\n    this.shadowRoot.querySelector(\"#container\").innerHTML = html;\n  }\n\n  _mutationCallback() {\n    if (window.ShadyCSS) {\n      this._observer.disconnect();\n    }\n\n    if (!this.hasAttribute(\"autobuild\")) {\n      const menu = this.querySelector(\"ul\");\n      this._menuContainer.innerHTML = menu.outerHTML;\n    } else if (this.hasAttribute(\"autobuild\")) {\n      this._buildNav();\n    }\n\n    if (window.ShadyCSS) {\n      this._observer.observe(this, pfeJumpLinksNavObserverConfig);\n    }\n  }\n\n  _isValidLightDom() {\n    if (!this.children.length) {\n      console.warn(\n        `${PfeJumpLinks.tag}: You must have a <ul> tag in the light DOM`\n      );\n      return false;\n    }\n\n    if (this.children[1].tagName !== \"UL\") {\n      console.warn(\n        `${PfeJumpLinks.tag}: The top-level list of links MUST be a <ul>`\n      );\n\n      return false;\n    }\n\n    return true;\n  }\n}\n\nclass PfeJumpLinksPanel extends PFElement {\n  static get version() {\n    return \"1.0.0-prerelease.39\";\n  }\n\n  get html() {\n    return `<style>\n/*# sourceMappingURL=pfe-jump-links-panel.min.css.map */\n</style><slot></slot>`;\n  }\n  static get tag() {\n    return \"pfe-jump-links-panel\";\n  }\n\n  get schemaUrl() {\n    return \"pfe-jump-links-panel.json\";\n  }\n\n  get templateUrl() {\n    return \"pfe-jump-links-panel.html\";\n  }\n\n  get styleUrl() {\n    return \"pfe-jump-links-panel.scss\";\n  }\n\n  static get events() {\n    return {\n      change: `${this.tag}:change`,\n      activeNavItem: `${this.tag}:active-navItem`\n    };\n  }\n\n  static get PfeType() {\n    return PFElement.PfeTypes.Content;\n  }\n\n  constructor() {\n    super(PfeJumpLinksPanel, { type: PfeJumpLinksPanel.PfeType });\n    this._init = this._init.bind(this);\n    this._slot = this.shadowRoot.querySelector(\"slot\");\n    this._slot.addEventListener(\"slotchange\", this._init);\n    this._scrollCallback = this._scrollCallback.bind(this);\n    this._mutationCallback = this._mutationCallback.bind(this);\n    this._observer = new MutationObserver(this._mutationCallback);\n    this.currentActive = null;\n    this.sectionMargin = this.getAttribute(\"offset\") || 200;\n    this.currentActive = 0;\n    this.current = -1;\n    this.nav = this._getNav();\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this._init();\n\n    if (this.nav && this.nav.hasAttribute(\"autobuild\")) {\n      this.nav._rebuildNav();\n    }\n\n    this._observer.observe(this, pfeJumpLinksPanelObserverConfig);\n  }\n\n  disconnectedCallback() {\n    this._observer.disconnect();\n    window.removeEventListener(\"scroll\");\n    this._slot.removeEventListener(\"slotchange\", this._init);\n  }\n\n  _init() {\n    window.addEventListener(\"scroll\", this._scrollCallback);\n    this.scrollTarget = this.getAttribute(\"scrolltarget\");\n    this.JumpLinksNav = document.querySelector(`#${this.scrollTarget}`);\n    this.sections = this.querySelectorAll(\".pfe-jump-links-panel__section\");\n\n    if (this.JumpLinksNav) {\n      this.menu_links = this.JumpLinksNav.querySelectorAll(\n        \".pfe-jump-links-nav__item\"\n      );\n    }\n  }\n\n  _getNav() {\n    return document.querySelector(\n      `pfe-jump-links-nav#${this.getAttribute(\"scrolltarget\")}`\n    );\n  }\n\n  _makeActive(link) {\n    if (this.menu_links[link]) {\n      // Check if this is a subnav or has subsections\n      if (this.menu_links[link].classList.contains(\"sub-section\")) {\n        this.menu_links[link].setAttribute(\"active\", \"\");\n        this.menu_links[link].parentNode.parentNode.parentNode.setAttribute(\n          \"active\",\n          \"\"\n        );\n        this.menu_links[link].parentNode.parentNode.parentNode.classList.add(\n          \"expand\"\n        );\n      } else if (this.menu_links[link].classList.contains(\"has-sub-section\")) {\n        this.menu_links[link].setAttribute(\"active\", \"\");\n        this.menu_links[link].parentNode.setAttribute(\"active\", \"\");\n        this.menu_links[link].parentNode.classList.add(\"expand\");\n      } else {\n        this.menu_links[link].setAttribute(\"active\", \"\");\n        this.menu_links[link].parentNode.setAttribute(\"active\", \"\");\n      }\n\n      let activeLink = this.JumpLinksNav.querySelector(\"[active]\");\n      this.emitEvent(PfeJumpLinksPanel.events.activeNavItem, {\n        detail: {\n          activeNavItem: activeLink\n        }\n      });\n    }\n  }\n\n  _removeActive(link) {\n    if (this.menu_links[link]) {\n      if (this.menu_links[link].classList.contains(\"sub-section\")) {\n        this.menu_links[link].parentNode.parentNode.parentNode.classList.remove(\n          \"expand\"\n        );\n      }\n      this.menu_links[link].removeAttribute(\"active\");\n      this.menu_links[link].parentNode.removeAttribute(\"active\");\n    }\n  }\n\n  _removeAllActive() {\n    if (!Object.keys) {\n      Object.keys = function(obj) {\n        if (obj !== Object(obj))\n          throw new TypeError(\"Object.keys called on a non-object\");\n        var k = [],\n          p;\n        for (p in obj)\n          if (Object.prototype.hasOwnProperty.call(obj, p)) k.push(p);\n        return k;\n      };\n      Object.keys.forEach = Array.forEach;\n    }\n  }\n\n  _mutationCallback() {\n    if (window.ShadyCSS) {\n      this._observer.disconnect();\n    }\n\n    //If we didn't get nav in the constructor, grab it now\n    if (!this.nav) {\n      this.nav = document.querySelector(\n        `pfe-jump-links-nav#${this.getAttribute(\"scrolltarget\")}`\n      );\n    }\n    //If we want the nav to be built automatically, re-init panel and rebuild nav\n    if (this.nav.hasAttribute(\"autobuild\")) {\n      this._init();\n      this.emitEvent(PfeJumpLinksPanel.events.change);\n      this.nav._rebuildNav();\n    }\n\n    if (window.ShadyCSS) {\n      this._observer.observe(this, pfeJumpLinksPanelObserverConfig);\n    }\n  }\n\n  _scrollCallback() {\n    let sections;\n    let menu_links;\n    let sectionMargin;\n    //Check sections to make sure we have them (if not, get them)\n    if (!this.sections || typeof this.sections === \"undefined\") {\n      this.sections = this.querySelectorAll(\".pfe-jump-links-panel__section\");\n    } else {\n      sections = this.sections;\n    }\n    //Check list of links to make sure we have them (if not, get them)\n    if (this.menu_links.length < 1 || !this.menu_links) {\n      this.menu_links = this.JumpLinksNav.shadowRoot.querySelectorAll(\n        \".pfe-jump-links-nav__item\"\n      );\n      menu_links = this.menu_links;\n    }\n\n    if (!this.sectionMargin) {\n      sectionMargin = 200;\n    } else {\n      sectionMargin = this.sectionMargin;\n    }\n\n    // Make an array from the node list\n    const sectionArr = [...sections];\n    // Get all the sections that match this point in the scroll\n    const matches = sectionArr\n      .filter(section => window.scrollY >= section.offsetTop - sectionMargin)\n      .reverse();\n\n    //Identify the last one queried as the current section\n    const current = sectionArr.indexOf(matches[0]);\n\n    // If that section isn't already active,\n    // remove active from the other links and make it active\n    if (current !== this.currentActive) {\n      this._removeAllActive();\n      this.currentActive = current;\n      this._makeActive(current);\n    }\n  }\n}\n\nPFElement.create(PfeJumpLinks);\nPFElement.create(PfeJumpLinksNav);\nPFElement.create(PfeJumpLinksPanel);\n\nexport default PfeJumpLinks;\n"],"names":[],"mappings":"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"}