!function(e,t){if("function"==typeof define&&define.amd)define(["../rhelement/rhelement.compiled.js"],t);else if("undefined"!=typeof exports)t(require("../rhelement/rhelement.compiled.js"));else{t(e.rhelementCompiled),e.cpTabs={}}}(this,function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=function(e){return e&&e.__esModule?e:{default:e}}(e),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=document.createElement("template");i.innerHTML='\n<style>:host {\n  display: flex;\n  flex-wrap: wrap; }\n\n::slotted([slot=tab]) {\n  border: 1px solid black;\n  padding: 20px; }\n\n::slotted([slot=panel]) {\n  flex-basis: 100%;\n  padding: 20px;\n  background-color: lightgray; }\n\n\n:host:not(:defined), ::slotted([slot=tab]):not(:defined), ::slotted([slot=panel]):not(:defined) {\n  display: block; }</style>\n<slot name="tab"></slot>\n<slot name="panel"></slot>\n';var l=37,s=39,c=36,u=35,h=function(e){function h(){t(this,h);var e=n(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,"cp-tabs",i));return e._onSlotChange=e._onSlotChange.bind(e),e._tabSlot=e.shadowRoot.querySelector("slot[name=tab]"),e._panelSlot=e.shadowRoot.querySelector("slot[name=panel]"),e._tabSlot.addEventListener("slotchange",e._onSlotChange),e._panelSlot.addEventListener("slotchange",e._onSlotChange),e}return a(h,r.default),o(h,[{key:"connectedCallback",value:function(){var e=this;this.addEventListener("keydown",this._onKeyDown),this.addEventListener("click",this._onClick),this.hasAttribute("role")||this.setAttribute("role","tablist"),Promise.all([customElements.whenDefined("cp-tab"),customElements.whenDefined("cp-panel")]).then(function(t){return e._linkPanels()})}},{key:"disconnectedCallback",value:function(){this.removeEventListener("keydown",this._onKeyDown),this.removeEventListener("click",this._onClick)}},{key:"_onSlotChange",value:function(){this._linkPanels()}},{key:"_linkPanels",value:function(){var e=this,t=this._allTabs();t.forEach(function(t){console.log(t);var n=e._panelForTab(t);"cp-panel"===n.tagName.toLowerCase()?n.setAttribute("aria-labelledby",t.id):console.error("Tab #"+t.id+" is not should control a <cp-panel>")});var n=t.find(function(e){return e.selected})||t[0];this._selectTab(n)}},{key:"_allPanels",value:function(){return Array.from(this.querySelectorAll("cp-panel"))}},{key:"_allTabs",value:function(){return Array.from(this.querySelectorAll("cp-tab"))}},{key:"_panelForTab",value:function(e){var t=e.getAttribute("aria-controls");return this.querySelector("#"+t)}},{key:"_prevTab",value:function(){var e=this._allTabs();return e[(e.findIndex(function(e){return e.selected})-1+e.length)%e.length]}},{key:"_firstTab",value:function(){return this._allTabs()[0]}},{key:"_lastTab",value:function(){var e=this._allTabs();return e[e.length-1]}},{key:"_nextTab",value:function(){var e=this._allTabs();return e[(e.findIndex(function(e){return e.selected})+1)%e.length]}},{key:"reset",value:function(){var e=this._allTabs(),t=this._allPanels();e.forEach(function(e){return e.selected=!1}),t.forEach(function(e){return e.hidden=!0})}},{key:"_selectTab",value:function(e){this.reset();var t=this._panelForTab(e);if(!t)throw new Error("No panel with id "+newPanelId);e.selected=!0,t.hidden=!1,e.focus()}},{key:"_onKeyDown",value:function(e){this.getAttribute("aria-orientation");if("tab"===e.target.getAttribute("role")&&!e.altKey){var t=void 0;switch(e.keyCode){case l:t=this._prevTab();break;case s:t=this._nextTab();break;case c:t=this._firstTab();break;case u:t=this._lastTab();break;default:return}e.preventDefault(),this._selectTab(t)}}},{key:"_onClick",value:function(e){"tab"===e.target.getAttribute("role")&&this._selectTab(e.target)}}]),h}();window.customElements.define("cp-tabs",h);var f=0,d=function(e){function r(){return t(this,r),n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this))}return a(r,HTMLElement),o(r,null,[{key:"observedAttributes",get:function(){return["selected"]}}]),o(r,[{key:"connectedCallback",value:function(){this.setAttribute("role","tab"),this.id||(this.id="cp-tab-generated-"+f++),this.setAttribute("aria-selected","false"),this.setAttribute("tabindex",-1),this._upgradeProperty("selected")}},{key:"_upgradeProperty",value:function(e){if(this.hasOwnProperty(e)){var t=this[e];delete this[e],this[e]=t}}},{key:"attributeChangedCallback",value:function(){var e=this.hasAttribute("selected");this.setAttribute("aria-selected",e),this.setAttribute("tabindex",e?0:-1)}},{key:"selected",set:function(e){(e=Boolean(e))?this.setAttribute("selected",""):this.removeAttribute("selected")},get:function(){return this.hasAttribute("selected")}}]),r}();customElements.define("cp-tab",d);var b=function(e){function r(){return t(this,r),n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this))}return a(r,HTMLElement),o(r,[{key:"connectedCallback",value:function(){if(this.setAttribute("role","tabpanel"),!this.id)throw new Error("Every panel has be have an ID to match with a tab.")}}]),r}();customElements.define("cp-panel",b)});